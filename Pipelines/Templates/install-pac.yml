steps:
# TEMPORARY WORKAROUND: Power Apps CLI functionality will eventually be surfaced in Azure DevOps tasks.
# However, to use functionality ahead of the tasks, we install the CLI.  Once the task is available, we move to using the task.
- powershell: |
    $nugetPackage = "Microsoft.PowerApps.CLI"
    $nugetPackageVersion = '$(pacVersion)'
    if ($nugetPackageVersion.Contains("pacVersion")){
      $nugetPackageVersion =  "1.8.5"
    }    
    $outFolder = "pac"
    nuget install $nugetPackage -Version $nugetPackageVersion -OutputDirectory $outFolder
    $pacNugetFolder = Get-ChildItem $outFolder | Where-Object {$_.Name -match $nugetPackage + "."}
    $pacPath = $pacNugetFolder.FullName + "\tools"
    echo "##vso[task.setvariable variable=pacPath]$pacPath"
  displayName: 'Install pac cli'
