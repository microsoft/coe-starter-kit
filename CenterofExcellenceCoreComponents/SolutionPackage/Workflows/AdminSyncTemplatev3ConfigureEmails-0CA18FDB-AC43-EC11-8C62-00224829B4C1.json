{
  "properties": {
    "connectionReferences": {
      "shared_commondataserviceforapps": {
        "api": {
          "name": "shared_commondataserviceforapps"
        },
        "connection": {
          "connectionReferenceLogicalName": "admin_CoECoreDataverse2"
        },
        "runtimeSource": "embedded"
      }
    },
    "definition": {
      "$schema": "https://schema.management.azure.com/providers/Microsoft.Logic/schemas/2016-06-01/workflowdefinition.json#",
      "actions": {
        "Admin_|_Capacity_Alerts_--_Send_Near_Capacity_Envts_to_Admin": {
          "actions": {
            "Insert_or_Update_Row_5": {
              "actions": {
                "Get_Mail_from_Table_5": {
                  "inputs": {
                    "authentication": "@parameters('$authentication')",
                    "host": {
                      "apiId": "/providers/Microsoft.PowerApps/apis/shared_commondataserviceforapps",
                      "connectionName": "shared_commondataserviceforapps",
                      "operationId": "GetItem"
                    },
                    "parameters": {
                      "$select": "admin_customizedemailid, admin_defaultbody, admin_defaultsubject, admin_body, admin_subject",
                      "entityName": "admin_customizedemails",
                      "recordId": "@variables('BasedOn')"
                    },
                    "retryPolicy": {
                      "count": 10,
                      "interval": "PT10S",
                      "type": "exponential"
                    }
                  },
                  "metadata": {
                    "operationMetadataId": "b77fe229-f87d-4256-a932-a358fbdce639"
                  },
                  "runAfter": {
                    "Reset_RowExists_true_5": [
                      "Succeeded"
                    ]
                  },
                  "type": "OpenApiConnection"
                },
                "Insert_or_Update_5": {
                  "actions": {
                    "Update_a_row_5": {
                      "inputs": {
                        "authentication": "@parameters('$authentication')",
                        "host": {
                          "apiId": "/providers/Microsoft.PowerApps/apis/shared_commondataserviceforapps",
                          "connectionName": "shared_commondataserviceforapps",
                          "operationId": "UpdateRecord"
                        },
                        "parameters": {
                          "entityName": "admin_customizedemails",
                          "item/admin_actionname": "@variables('ActionName')",
                          "item/admin_basedon": "@variables('BasedOn')",
                          "item/admin_body": "@if(equals(outputs('Get_Mail_from_Table_5')?['body/admin_defaultbody'], true), variables('Body'), outputs('Get_Mail_from_Table_5')?['body/admin_body'])",
                          "item/admin_flowname": "@variables('FlowName')",
                          "item/admin_language": "en-US",
                          "item/admin_name": "@{variables('FlowName')} -- @{variables('ActionName')} -- en-US",
                          "item/admin_solution": "@variables('Solution')",
                          "item/admin_subject": "@if(equals(outputs('Get_Mail_from_Table_5')?['body/admin_defaultsubject'], true), variables('Subject'), outputs('Get_Mail_from_Table_5')?['body/admin_subject'])",
                          "item/admin_targetaudiance": "@variables('TargetAudiance')",
                          "recordId": "@variables('BasedOn')"
                        },
                        "retryPolicy": {
                          "count": 10,
                          "interval": "PT10S",
                          "type": "exponential"
                        }
                      },
                      "metadata": {
                        "operationMetadataId": "a12281c5-d681-463a-8ca6-993f90857cbe"
                      },
                      "runAfter": {},
                      "type": "OpenApiConnection"
                    }
                  },
                  "else": {
                    "actions": {
                      "Add_a_new_row_5": {
                        "inputs": {
                          "authentication": "@parameters('$authentication')",
                          "host": {
                            "apiId": "/providers/Microsoft.PowerApps/apis/shared_commondataserviceforapps",
                            "connectionName": "shared_commondataserviceforapps",
                            "operationId": "CreateRecord"
                          },
                          "parameters": {
                            "entityName": "admin_customizedemails",
                            "item/admin_actionname": "@variables('ActionName')",
                            "item/admin_basedon": "@variables('BasedOn')",
                            "item/admin_body": "@variables('Body')",
                            "item/admin_customizedemailid": "@variables('BasedOn')",
                            "item/admin_defaultbody": true,
                            "item/admin_defaultsubject": true,
                            "item/admin_flowname": "@variables('FlowName')",
                            "item/admin_language": "en-US",
                            "item/admin_name": "@{variables('FlowName')} -- @{variables('ActionName')} -- en-US",
                            "item/admin_solution": "@variables('Solution')",
                            "item/admin_subject": "@variables('Subject')",
                            "item/admin_targetaudiance": "@variables('TargetAudiance')"
                          },
                          "retryPolicy": {
                            "count": 10,
                            "interval": "PT10S",
                            "type": "exponential"
                          }
                        },
                        "metadata": {
                          "operationMetadataId": "125d1e55-3d78-45ac-8ea6-68756582973c"
                        },
                        "runAfter": {},
                        "type": "OpenApiConnection"
                      }
                    }
                  },
                  "expression": {
                    "equals": [
                      "@variables('RowExists')",
                      "@true"
                    ]
                  },
                  "metadata": {
                    "operationMetadataId": "91fe85dd-e03c-4546-b9fa-d1ebb452fb48"
                  },
                  "runAfter": {
                    "Set_RowExists_false_5": [
                      "Succeeded",
                      "Skipped"
                    ]
                  },
                  "type": "If"
                },
                "Reset_RowExists_true_5": {
                  "inputs": {
                    "name": "RowExists",
                    "value": "@true"
                  },
                  "metadata": {
                    "operationMetadataId": "60100e24-a058-4c0f-884e-9e04dfa99fd0"
                  },
                  "runAfter": {},
                  "type": "SetVariable"
                },
                "Set_RowExists_false_5": {
                  "inputs": {
                    "name": "RowExists",
                    "value": "@false"
                  },
                  "metadata": {
                    "operationMetadataId": "e7783cb2-9eb5-45af-a720-f448b02bd1c4"
                  },
                  "runAfter": {
                    "Get_Mail_from_Table_5": [
                      "Failed"
                    ]
                  },
                  "type": "SetVariable"
                }
              },
              "metadata": {
                "operationMetadataId": "2098e029-bc04-469a-98b5-40f3065d334d"
              },
              "runAfter": {
                "Setup_Values_5": [
                  "Succeeded"
                ]
              },
              "type": "Scope"
            },
            "Setup_Values_5": {
              "actions": {
                "Set_ActionName_5": {
                  "inputs": {
                    "name": "ActionName",
                    "value": "Send Near Capacity Envts to Admin"
                  },
                  "metadata": {
                    "operationMetadataId": "5e748780-a04c-4c24-8f6f-d385060fc7e2"
                  },
                  "runAfter": {
                    "Set_FlowName_5": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_BasedOn_5": {
                  "inputs": {
                    "name": "BasedOn",
                    "value": "028b4d58-7d41-ec11-8c62-00224829bf00"
                  },
                  "metadata": {
                    "operationMetadataId": "38e1d3f2-bb8b-4c52-b77f-ec8f89b3fc1b"
                  },
                  "runAfter": {
                    "Set_TargetAudiance_5": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_Body_5": {
                  "inputs": {
                    "name": "Body",
                    "value": "<br>\nThe following environments are at 80% of their approved capacity:<br>"
                  },
                  "metadata": {
                    "operationMetadataId": "d3845d75-dd30-47fd-9915-0b0585ef79b6"
                  },
                  "runAfter": {
                    "Set_ActionName_5": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_FlowName_5": {
                  "inputs": {
                    "name": "FlowName",
                    "value": "Admin | Capacity Alerts"
                  },
                  "metadata": {
                    "operationMetadataId": "d036023b-e01d-4e08-b2c4-f10542fb6ddb"
                  },
                  "runAfter": {
                    "Set_Solution_5": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_Solution_5": {
                  "inputs": {
                    "name": "Solution",
                    "value": "Core"
                  },
                  "metadata": {
                    "operationMetadataId": "4e1abe9a-efeb-4ba3-bf1f-6137af907757"
                  },
                  "runAfter": {},
                  "type": "SetVariable"
                },
                "Set_Subject_5": {
                  "inputs": {
                    "name": "Subject",
                    "value": "Admin | Near Capacity alerts"
                  },
                  "metadata": {
                    "operationMetadataId": "c5c653a5-9ae6-4809-8278-9536604c7b93"
                  },
                  "runAfter": {
                    "Set_Body_5": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_TargetAudiance_5": {
                  "inputs": {
                    "name": "TargetAudiance",
                    "value": "Admin"
                  },
                  "metadata": {
                    "operationMetadataId": "d5c878ad-1e4b-47fc-a452-7e6d6cb031c9"
                  },
                  "runAfter": {
                    "Set_Subject_5": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                }
              },
              "metadata": {
                "operationMetadataId": "6e0d6f59-c30d-4bd4-a9af-cf4058ead300"
              },
              "runAfter": {},
              "type": "Scope"
            }
          },
          "metadata": {
            "operationMetadataId": "362166e3-8dd9-4da9-b848-c20d4fa822f1"
          },
          "runAfter": {
            "Admin_|_Capacity_Alerts_--_Send_Over_Capacity_Envts_to_Admin": [
              "Succeeded"
            ]
          },
          "type": "Scope"
        },
        "Admin_|_Capacity_Alerts_--_Send_Over_Capacity_Envts_to_Admin": {
          "actions": {
            "Insert_or_Update_Row_4": {
              "actions": {
                "Get_Mail_from_Table_4": {
                  "inputs": {
                    "authentication": "@parameters('$authentication')",
                    "host": {
                      "apiId": "/providers/Microsoft.PowerApps/apis/shared_commondataserviceforapps",
                      "connectionName": "shared_commondataserviceforapps",
                      "operationId": "GetItem"
                    },
                    "parameters": {
                      "$select": "admin_customizedemailid, admin_defaultbody, admin_defaultsubject, admin_body, admin_subject",
                      "entityName": "admin_customizedemails",
                      "recordId": "@variables('BasedOn')"
                    },
                    "retryPolicy": {
                      "count": 10,
                      "interval": "PT10S",
                      "type": "exponential"
                    }
                  },
                  "metadata": {
                    "operationMetadataId": "b6a3ba59-0164-4503-989b-b6d63a3a987a"
                  },
                  "runAfter": {
                    "Reset_RowExists_true_4": [
                      "Succeeded"
                    ]
                  },
                  "type": "OpenApiConnection"
                },
                "Insert_or_Update_4": {
                  "actions": {
                    "Update_a_row_4": {
                      "inputs": {
                        "authentication": "@parameters('$authentication')",
                        "host": {
                          "apiId": "/providers/Microsoft.PowerApps/apis/shared_commondataserviceforapps",
                          "connectionName": "shared_commondataserviceforapps",
                          "operationId": "UpdateRecord"
                        },
                        "parameters": {
                          "entityName": "admin_customizedemails",
                          "item/admin_actionname": "@variables('ActionName')",
                          "item/admin_basedon": "@variables('BasedOn')",
                          "item/admin_body": "@if(equals(outputs('Get_Mail_from_Table_4')?['body/admin_defaultbody'], true), variables('Body'), outputs('Get_Mail_from_Table_4')?['body/admin_body'])",
                          "item/admin_flowname": "@variables('FlowName')",
                          "item/admin_language": "en-US",
                          "item/admin_name": "@{variables('FlowName')} -- @{variables('ActionName')} -- en-US",
                          "item/admin_solution": "@variables('Solution')",
                          "item/admin_subject": "@if(equals(outputs('Get_Mail_from_Table_4')?['body/admin_defaultsubject'], true), variables('Subject'), outputs('Get_Mail_from_Table_4')?['body/admin_subject'])",
                          "item/admin_targetaudiance": "@variables('TargetAudiance')",
                          "recordId": "@variables('BasedOn')"
                        },
                        "retryPolicy": {
                          "count": 10,
                          "interval": "PT10S",
                          "type": "exponential"
                        }
                      },
                      "metadata": {
                        "operationMetadataId": "a7131ef6-8e92-4b3f-98b1-0a040fa60077"
                      },
                      "runAfter": {},
                      "type": "OpenApiConnection"
                    }
                  },
                  "else": {
                    "actions": {
                      "Add_a_new_row_4": {
                        "inputs": {
                          "authentication": "@parameters('$authentication')",
                          "host": {
                            "apiId": "/providers/Microsoft.PowerApps/apis/shared_commondataserviceforapps",
                            "connectionName": "shared_commondataserviceforapps",
                            "operationId": "CreateRecord"
                          },
                          "parameters": {
                            "entityName": "admin_customizedemails",
                            "item/admin_actionname": "@variables('ActionName')",
                            "item/admin_basedon": "@variables('BasedOn')",
                            "item/admin_body": "@variables('Body')",
                            "item/admin_customizedemailid": "@variables('BasedOn')",
                            "item/admin_defaultbody": true,
                            "item/admin_defaultsubject": true,
                            "item/admin_flowname": "@variables('FlowName')",
                            "item/admin_language": "en-US",
                            "item/admin_name": "@{variables('FlowName')} -- @{variables('ActionName')} -- en-US",
                            "item/admin_solution": "@variables('Solution')",
                            "item/admin_subject": "@variables('Subject')",
                            "item/admin_targetaudiance": "@variables('TargetAudiance')"
                          },
                          "retryPolicy": {
                            "count": 10,
                            "interval": "PT10S",
                            "type": "exponential"
                          }
                        },
                        "metadata": {
                          "operationMetadataId": "4eb63c4e-768b-482a-8b73-129dc55bee39"
                        },
                        "runAfter": {},
                        "type": "OpenApiConnection"
                      }
                    }
                  },
                  "expression": {
                    "equals": [
                      "@variables('RowExists')",
                      "@true"
                    ]
                  },
                  "metadata": {
                    "operationMetadataId": "7c8647e2-8e41-4c23-82d9-baa69fe63359"
                  },
                  "runAfter": {
                    "Set_RowExists_false_4": [
                      "Succeeded",
                      "Skipped"
                    ]
                  },
                  "type": "If"
                },
                "Reset_RowExists_true_4": {
                  "inputs": {
                    "name": "RowExists",
                    "value": "@true"
                  },
                  "metadata": {
                    "operationMetadataId": "47313961-66bd-4cf5-bd10-baab00a9c30f"
                  },
                  "runAfter": {},
                  "type": "SetVariable"
                },
                "Set_RowExists_false_4": {
                  "inputs": {
                    "name": "RowExists",
                    "value": "@false"
                  },
                  "metadata": {
                    "operationMetadataId": "54edee13-e762-4f1a-b030-35bed5a466e6"
                  },
                  "runAfter": {
                    "Get_Mail_from_Table_4": [
                      "Failed"
                    ]
                  },
                  "type": "SetVariable"
                }
              },
              "metadata": {
                "operationMetadataId": "f05f3176-581d-49c4-b96a-52f2ba036b41"
              },
              "runAfter": {
                "Setup_Values_4": [
                  "Succeeded"
                ]
              },
              "type": "Scope"
            },
            "Setup_Values_4": {
              "actions": {
                "Set_ActionName_4": {
                  "inputs": {
                    "name": "ActionName",
                    "value": "Send Over Capacity Envts to Admin"
                  },
                  "metadata": {
                    "operationMetadataId": "1ce0345e-6850-40be-a443-4fe6bbc7e40c"
                  },
                  "runAfter": {
                    "Set_FlowName_4": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_BasedOn_4": {
                  "inputs": {
                    "name": "BasedOn",
                    "value": "fc8a4d58-7d41-ec11-8c62-00224829bf00"
                  },
                  "metadata": {
                    "operationMetadataId": "595a19a3-8f22-4238-9df9-bd9d331041d1"
                  },
                  "runAfter": {
                    "Set_TargetAudiance_4": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_Body_4": {
                  "inputs": {
                    "name": "Body",
                    "value": "<br>\nThe following environments are over their approved capacity:<br>"
                  },
                  "metadata": {
                    "operationMetadataId": "bae4c2ef-47a3-4017-b899-059f745d5504"
                  },
                  "runAfter": {
                    "Set_ActionName_4": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_FlowName_4": {
                  "inputs": {
                    "name": "FlowName",
                    "value": "Admin | Capacity Alerts"
                  },
                  "metadata": {
                    "operationMetadataId": "aa4dfbd0-f3bd-44c8-ad1a-2610705116a6"
                  },
                  "runAfter": {
                    "Set_Solution_4": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_Solution_4": {
                  "inputs": {
                    "name": "Solution",
                    "value": "Core"
                  },
                  "metadata": {
                    "operationMetadataId": "a0089fea-a683-41d3-981c-70027e128ea8"
                  },
                  "runAfter": {},
                  "type": "SetVariable"
                },
                "Set_Subject_4": {
                  "inputs": {
                    "name": "Subject",
                    "value": "Admin | Capacity alerts"
                  },
                  "metadata": {
                    "operationMetadataId": "315a76c4-83f8-4cde-9ea1-abc294c35ec8"
                  },
                  "runAfter": {
                    "Set_Body_4": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_TargetAudiance_4": {
                  "inputs": {
                    "name": "TargetAudiance",
                    "value": "Admin"
                  },
                  "metadata": {
                    "operationMetadataId": "060d83df-ef29-427d-aa55-e9cf781875ee"
                  },
                  "runAfter": {
                    "Set_Subject_4": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                }
              },
              "metadata": {
                "operationMetadataId": "a52eab12-f600-448f-b4ef-5bc23c9bb9c6"
              },
              "runAfter": {},
              "type": "Scope"
            }
          },
          "metadata": {
            "operationMetadataId": "b18165fa-55fa-429a-a193-c1c56762ca70"
          },
          "runAfter": {
            "Env_Request_|_Notify_requestor_when_rejected_--_Request_was_rejected": [
              "Succeeded"
            ]
          },
          "type": "Scope"
        },
        "Admin_|_Compliance_detail_request_v3_--_Send_Audit_Mail_to_Owner_Apps": {
          "actions": {
            "Insert_or_Update_Row_6": {
              "actions": {
                "Get_Mail_from_Table_6": {
                  "inputs": {
                    "authentication": "@parameters('$authentication')",
                    "host": {
                      "apiId": "/providers/Microsoft.PowerApps/apis/shared_commondataserviceforapps",
                      "connectionName": "shared_commondataserviceforapps",
                      "operationId": "GetItem"
                    },
                    "parameters": {
                      "$select": "admin_customizedemailid, admin_defaultbody, admin_defaultsubject, admin_body, admin_subject",
                      "entityName": "admin_customizedemails",
                      "recordId": "@variables('BasedOn')"
                    },
                    "retryPolicy": {
                      "count": 10,
                      "interval": "PT10S",
                      "type": "exponential"
                    }
                  },
                  "metadata": {
                    "operationMetadataId": "13e07597-6b8f-4bf9-ba2f-f052b14ae928"
                  },
                  "runAfter": {
                    "Reset_RowExists_true_6": [
                      "Succeeded"
                    ]
                  },
                  "type": "OpenApiConnection"
                },
                "Insert_or_Update_6": {
                  "actions": {
                    "Update_a_row_6": {
                      "inputs": {
                        "authentication": "@parameters('$authentication')",
                        "host": {
                          "apiId": "/providers/Microsoft.PowerApps/apis/shared_commondataserviceforapps",
                          "connectionName": "shared_commondataserviceforapps",
                          "operationId": "UpdateRecord"
                        },
                        "parameters": {
                          "entityName": "admin_customizedemails",
                          "item/admin_actionname": "@variables('ActionName')",
                          "item/admin_basedon": "@variables('BasedOn')",
                          "item/admin_body": "@if(equals(outputs('Get_Mail_from_Table_6')?['body/admin_defaultbody'], true), variables('Body'), outputs('Get_Mail_from_Table_6')?['body/admin_body'])",
                          "item/admin_flowname": "@variables('FlowName')",
                          "item/admin_language": "en-US",
                          "item/admin_name": "@{variables('FlowName')} -- @{variables('ActionName')} -- en-US",
                          "item/admin_solution": "@variables('Solution')",
                          "item/admin_subject": "@if(equals(outputs('Get_Mail_from_Table_6')?['body/admin_defaultsubject'], true), variables('Subject'), outputs('Get_Mail_from_Table_6')?['body/admin_subject'])",
                          "item/admin_targetaudiance": "@variables('TargetAudiance')",
                          "recordId": "@variables('BasedOn')"
                        },
                        "retryPolicy": {
                          "count": 10,
                          "interval": "PT10S",
                          "type": "exponential"
                        }
                      },
                      "metadata": {
                        "operationMetadataId": "0944b484-8df3-4039-8bd8-5bf62b8e31ba"
                      },
                      "runAfter": {},
                      "type": "OpenApiConnection"
                    }
                  },
                  "else": {
                    "actions": {
                      "Add_a_new_row_6": {
                        "inputs": {
                          "authentication": "@parameters('$authentication')",
                          "host": {
                            "apiId": "/providers/Microsoft.PowerApps/apis/shared_commondataserviceforapps",
                            "connectionName": "shared_commondataserviceforapps",
                            "operationId": "CreateRecord"
                          },
                          "parameters": {
                            "entityName": "admin_customizedemails",
                            "item/admin_actionname": "@variables('ActionName')",
                            "item/admin_basedon": "@variables('BasedOn')",
                            "item/admin_body": "@variables('Body')",
                            "item/admin_customizedemailid": "@variables('BasedOn')",
                            "item/admin_defaultbody": true,
                            "item/admin_defaultsubject": true,
                            "item/admin_flowname": "@variables('FlowName')",
                            "item/admin_language": "en-US",
                            "item/admin_name": "@{variables('FlowName')} -- @{variables('ActionName')} -- en-US",
                            "item/admin_solution": "@variables('Solution')",
                            "item/admin_subject": "@variables('Subject')",
                            "item/admin_targetaudiance": "@variables('TargetAudiance')"
                          },
                          "retryPolicy": {
                            "count": 10,
                            "interval": "PT10S",
                            "type": "exponential"
                          }
                        },
                        "metadata": {
                          "operationMetadataId": "6556d2f2-58bd-4384-82b6-b28341f2a4ff"
                        },
                        "runAfter": {},
                        "type": "OpenApiConnection"
                      }
                    }
                  },
                  "expression": {
                    "equals": [
                      "@variables('RowExists')",
                      "@true"
                    ]
                  },
                  "metadata": {
                    "operationMetadataId": "f64a95f4-0ab4-4c3e-99f8-3dabc9ac76a2"
                  },
                  "runAfter": {
                    "Set_RowExists_false_6": [
                      "Succeeded",
                      "Skipped"
                    ]
                  },
                  "type": "If"
                },
                "Reset_RowExists_true_6": {
                  "inputs": {
                    "name": "RowExists",
                    "value": "@true"
                  },
                  "metadata": {
                    "operationMetadataId": "f6a5a9ff-1de4-451e-bc18-c95cab3f19e9"
                  },
                  "runAfter": {},
                  "type": "SetVariable"
                },
                "Set_RowExists_false_6": {
                  "inputs": {
                    "name": "RowExists",
                    "value": "@false"
                  },
                  "metadata": {
                    "operationMetadataId": "3bf247f0-f8de-4431-9215-921e8f5c4514"
                  },
                  "runAfter": {
                    "Get_Mail_from_Table_6": [
                      "Failed"
                    ]
                  },
                  "type": "SetVariable"
                }
              },
              "metadata": {
                "operationMetadataId": "27ac38b7-3be3-4b52-9ab3-43db72a632c8"
              },
              "runAfter": {
                "Setup_Values_6": [
                  "Succeeded"
                ]
              },
              "type": "Scope"
            },
            "Setup_Values_6": {
              "actions": {
                "Set_ActionName_6": {
                  "inputs": {
                    "name": "ActionName",
                    "value": "Send Audit Mail to Owner Apps"
                  },
                  "metadata": {
                    "operationMetadataId": "4cad0b84-42fe-4816-84bb-fe485e357ed1"
                  },
                  "runAfter": {
                    "Set_FlowName_6": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_BasedOn_6": {
                  "inputs": {
                    "name": "BasedOn",
                    "value": "b5bb8e1c-8741-ec11-8c62-00224829bf00"
                  },
                  "metadata": {
                    "operationMetadataId": "659bf2b8-653c-49dd-affd-db582103fe06"
                  },
                  "runAfter": {
                    "Set_TargetAudiance_6": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_Body_6": {
                  "inputs": {
                    "name": "Body",
                    "value": "<p>Your admin needs details about your broadly shared app. </p>\n<p>You own an app that's currently shared or used broadly and missing compliance details, which means it needs to be audited by an administrator per our support policy. <br>\nPlease complete the business justification details in the Developer Compliance Center app to document the intended use.<br>\n<br>\n<strong><u>How to become compliant</u></strong><br>\n<ol>\n      <li> Follow the link below </li>\n      <li>Add a description to your app.</li>\n      <li>Provide a business justification.</li>\n      <li>Iterate the solution's dependencies.</li>\n      <li>Profide details on the solution's access managment.</li>\n      <li>Select the business impact.</li>\n      <li>Selat the data classification.</li>\n      <li>Provide a Mitigation plan in the form of an attachment.</li>\n      <li>Update the 'Mitigation plan provided' toggle to 'Yes'.</li>\n    </ol>\n  </li>\n</ol>\n</p>"
                  },
                  "metadata": {
                    "operationMetadataId": "768345e1-ea46-4c38-b4cd-1f4345fed272"
                  },
                  "runAfter": {
                    "Set_ActionName_6": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_FlowName_6": {
                  "inputs": {
                    "name": "FlowName",
                    "value": "Admin | Compliance detail request v3"
                  },
                  "metadata": {
                    "operationMetadataId": "ab171ac7-1e52-49ce-b336-e300e9284274"
                  },
                  "runAfter": {
                    "Set_Solution_6": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_Solution_6": {
                  "inputs": {
                    "name": "Solution",
                    "value": "Core"
                  },
                  "metadata": {
                    "operationMetadataId": "3a82a75d-3775-465a-aaaf-d53b954eb96a"
                  },
                  "runAfter": {},
                  "type": "SetVariable"
                },
                "Set_Subject_6": {
                  "inputs": {
                    "name": "Subject",
                    "value": "Submit compliance details for your app"
                  },
                  "metadata": {
                    "operationMetadataId": "29cff0dd-0f84-4a2d-bf3c-ad1e08762d30"
                  },
                  "runAfter": {
                    "Set_Body_6": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_TargetAudiance_6": {
                  "inputs": {
                    "name": "TargetAudiance",
                    "value": "Maker"
                  },
                  "metadata": {
                    "operationMetadataId": "10446eb8-52aa-43f3-ad74-d7d0627ef63e"
                  },
                  "runAfter": {
                    "Set_Subject_6": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                }
              },
              "metadata": {
                "operationMetadataId": "bef0dedc-caaa-476e-8cac-a02b8628aa0c"
              },
              "runAfter": {},
              "type": "Scope"
            }
          },
          "metadata": {
            "operationMetadataId": "07416c04-052d-4cd6-86ad-ad91ee26f786"
          },
          "runAfter": {
            "Admin_|_Capacity_Alerts_--_Send_Near_Capacity_Envts_to_Admin": [
              "Succeeded"
            ]
          },
          "type": "Scope"
        },
        "Admin_|_Compliance_detail_request_v3_--_Send_Audit_Mail_to_Owner_Bots": {
          "actions": {
            "Insert_or_Update_Row_7": {
              "actions": {
                "Get_Mail_from_Table_7": {
                  "inputs": {
                    "authentication": "@parameters('$authentication')",
                    "host": {
                      "apiId": "/providers/Microsoft.PowerApps/apis/shared_commondataserviceforapps",
                      "connectionName": "shared_commondataserviceforapps",
                      "operationId": "GetItem"
                    },
                    "parameters": {
                      "$select": "admin_customizedemailid, admin_defaultbody, admin_defaultsubject, admin_body, admin_subject",
                      "entityName": "admin_customizedemails",
                      "recordId": "@variables('BasedOn')"
                    },
                    "retryPolicy": {
                      "count": 10,
                      "interval": "PT10S",
                      "type": "exponential"
                    }
                  },
                  "metadata": {
                    "operationMetadataId": "aa52376e-2db2-4363-b447-dd42684d4323"
                  },
                  "runAfter": {
                    "Reset_RowExists_true_7": [
                      "Succeeded"
                    ]
                  },
                  "type": "OpenApiConnection"
                },
                "Insert_or_Update_7": {
                  "actions": {
                    "Update_a_row_7": {
                      "inputs": {
                        "authentication": "@parameters('$authentication')",
                        "host": {
                          "apiId": "/providers/Microsoft.PowerApps/apis/shared_commondataserviceforapps",
                          "connectionName": "shared_commondataserviceforapps",
                          "operationId": "UpdateRecord"
                        },
                        "parameters": {
                          "entityName": "admin_customizedemails",
                          "item/admin_actionname": "@variables('ActionName')",
                          "item/admin_basedon": "@variables('BasedOn')",
                          "item/admin_body": "@if(equals(outputs('Get_Mail_from_Table_7')?['body/admin_defaultbody'], true), variables('Body'), outputs('Get_Mail_from_Table_7')?['body/admin_body'])",
                          "item/admin_flowname": "@variables('FlowName')",
                          "item/admin_language": "en-US",
                          "item/admin_name": "@{variables('FlowName')} -- @{variables('ActionName')} -- en-US",
                          "item/admin_solution": "@variables('Solution')",
                          "item/admin_subject": "@if(equals(outputs('Get_Mail_from_Table_7')?['body/admin_defaultsubject'], true), variables('Subject'), outputs('Get_Mail_from_Table_7')?['body/admin_subject'])",
                          "item/admin_targetaudiance": "@variables('TargetAudiance')",
                          "recordId": "@variables('BasedOn')"
                        },
                        "retryPolicy": {
                          "count": 10,
                          "interval": "PT10S",
                          "type": "exponential"
                        }
                      },
                      "metadata": {
                        "operationMetadataId": "cf8ded7d-7c72-4687-981d-7098bb598b84"
                      },
                      "runAfter": {},
                      "type": "OpenApiConnection"
                    }
                  },
                  "else": {
                    "actions": {
                      "Add_a_new_row_7": {
                        "inputs": {
                          "authentication": "@parameters('$authentication')",
                          "host": {
                            "apiId": "/providers/Microsoft.PowerApps/apis/shared_commondataserviceforapps",
                            "connectionName": "shared_commondataserviceforapps",
                            "operationId": "CreateRecord"
                          },
                          "parameters": {
                            "entityName": "admin_customizedemails",
                            "item/admin_actionname": "@variables('ActionName')",
                            "item/admin_basedon": "@variables('BasedOn')",
                            "item/admin_body": "@variables('Body')",
                            "item/admin_customizedemailid": "@variables('BasedOn')",
                            "item/admin_defaultbody": true,
                            "item/admin_defaultsubject": true,
                            "item/admin_flowname": "@variables('FlowName')",
                            "item/admin_language": "en-US",
                            "item/admin_name": "@{variables('FlowName')} -- @{variables('ActionName')} -- en-US",
                            "item/admin_solution": "@variables('Solution')",
                            "item/admin_subject": "@variables('Subject')",
                            "item/admin_targetaudiance": "@variables('TargetAudiance')"
                          },
                          "retryPolicy": {
                            "count": 10,
                            "interval": "PT10S",
                            "type": "exponential"
                          }
                        },
                        "metadata": {
                          "operationMetadataId": "9b72aadf-f9bf-486c-84d0-d93073a77b7d"
                        },
                        "runAfter": {},
                        "type": "OpenApiConnection"
                      }
                    }
                  },
                  "expression": {
                    "equals": [
                      "@variables('RowExists')",
                      "@true"
                    ]
                  },
                  "metadata": {
                    "operationMetadataId": "aed96ea6-ca2a-434e-8f9d-79b59ab98f21"
                  },
                  "runAfter": {
                    "Set_RowExists_false_7": [
                      "Succeeded",
                      "Skipped"
                    ]
                  },
                  "type": "If"
                },
                "Reset_RowExists_true_7": {
                  "inputs": {
                    "name": "RowExists",
                    "value": "@true"
                  },
                  "metadata": {
                    "operationMetadataId": "995c5c1a-e40f-4ac2-adde-6aeb5dec5165"
                  },
                  "runAfter": {},
                  "type": "SetVariable"
                },
                "Set_RowExists_false_7": {
                  "inputs": {
                    "name": "RowExists",
                    "value": "@false"
                  },
                  "metadata": {
                    "operationMetadataId": "3fda238c-1d15-4c80-a52f-d5cd2b8f9015"
                  },
                  "runAfter": {
                    "Get_Mail_from_Table_7": [
                      "Failed"
                    ]
                  },
                  "type": "SetVariable"
                }
              },
              "metadata": {
                "operationMetadataId": "889f9377-ccb3-45a1-918c-8cdbf9ef3113"
              },
              "runAfter": {
                "Setup_Values_7": [
                  "Succeeded"
                ]
              },
              "type": "Scope"
            },
            "Setup_Values_7": {
              "actions": {
                "Set_ActionName_7": {
                  "inputs": {
                    "name": "ActionName",
                    "value": "Send Audit Mail to Owner Bots"
                  },
                  "metadata": {
                    "operationMetadataId": "270b488e-6113-449b-953a-a93b39d078ac"
                  },
                  "runAfter": {
                    "Set_FlowName_7": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_BasedOn_7": {
                  "inputs": {
                    "name": "BasedOn",
                    "value": "87853f93-cd41-ec11-8c62-00224829bf00"
                  },
                  "metadata": {
                    "operationMetadataId": "7b777005-d4c9-47e4-9521-90537ce3558b"
                  },
                  "runAfter": {
                    "Set_TargetAudiance_7": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_Body_7": {
                  "inputs": {
                    "name": "Body",
                    "value": "<p>You own a chatbot that's frequently used and which missing compliance details, which means it needs to be audited by an administrator per our support policy. <br>\nPlease complete the business justification details in the Developer Compliance Center app to document the intended use.<br>\n<br>\n<strong><u>How to become compliant</u></strong><br>\n<ol>\n      <li> Follow the link below </li>\n      <li>Add a description.</li>\n      <li>Provide a business justification.</li>\n      <li>Iterate the solution's dependencies.</li>\n      <li>Provide details on the solution's access managment.</li>\n      <li>Select the business impact.</li>\n      <li>Provide a Mitigation plan in the form of an attachment.</li>\n      <li>Update the 'Mitigation plan provided' toggle to 'Yes'.</li>\n    </ol>\n  </li>\n</ol>"
                  },
                  "metadata": {
                    "operationMetadataId": "7bd3a8b0-3f38-4ebc-b6df-e8320a0856ec"
                  },
                  "runAfter": {
                    "Set_ActionName_7": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_FlowName_7": {
                  "inputs": {
                    "name": "FlowName",
                    "value": "Admin | Compliance detail request v3"
                  },
                  "metadata": {
                    "operationMetadataId": "5b80dfd2-11f3-4b58-a02c-f35fa475b0b7"
                  },
                  "runAfter": {
                    "Set_Solution_7": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_Solution_7": {
                  "inputs": {
                    "name": "Solution",
                    "value": "Core"
                  },
                  "metadata": {
                    "operationMetadataId": "1cfb7110-9edf-42ae-a61d-d327bda8b86f"
                  },
                  "runAfter": {},
                  "type": "SetVariable"
                },
                "Set_Subject_7": {
                  "inputs": {
                    "name": "Subject",
                    "value": "Submit compliance details for your chatbot"
                  },
                  "metadata": {
                    "operationMetadataId": "f57dab6b-7d87-44b0-a0e5-e3094370bd50"
                  },
                  "runAfter": {
                    "Set_Body_7": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_TargetAudiance_7": {
                  "inputs": {
                    "name": "TargetAudiance",
                    "value": "Maker"
                  },
                  "metadata": {
                    "operationMetadataId": "10ef66b7-aa69-4c64-992a-8f065a446f09"
                  },
                  "runAfter": {
                    "Set_Subject_7": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                }
              },
              "metadata": {
                "operationMetadataId": "997f1975-3178-49e4-a463-ec85c2aa8e22"
              },
              "runAfter": {},
              "type": "Scope"
            }
          },
          "metadata": {
            "operationMetadataId": "bec36857-16f0-4854-baeb-ca45cfe50f7c"
          },
          "runAfter": {
            "Admin_|_Compliance_detail_request_v3_--_Send_Audit_Mail_to_Owner_Apps": [
              "Succeeded"
            ]
          },
          "type": "Scope"
        },
        "Admin_|_Compliance_detail_request_v3_--_Send_Republish_Mail_to_Owner_Apps": {
          "actions": {
            "Insert_or_Update_Row_2": {
              "actions": {
                "Get_Mail_from_Table_2": {
                  "inputs": {
                    "authentication": "@parameters('$authentication')",
                    "host": {
                      "apiId": "/providers/Microsoft.PowerApps/apis/shared_commondataserviceforapps",
                      "connectionName": "shared_commondataserviceforapps",
                      "operationId": "GetItem"
                    },
                    "parameters": {
                      "$select": "admin_customizedemailid, admin_defaultbody, admin_defaultsubject, admin_body, admin_subject",
                      "entityName": "admin_customizedemails",
                      "recordId": "@variables('BasedOn')"
                    },
                    "retryPolicy": {
                      "count": 10,
                      "interval": "PT10S",
                      "type": "exponential"
                    }
                  },
                  "metadata": {
                    "operationMetadataId": "263c04c2-68ea-4b0b-b981-f7b64cabafd7"
                  },
                  "runAfter": {
                    "Reset_RowExists_true_2": [
                      "Succeeded"
                    ]
                  },
                  "type": "OpenApiConnection"
                },
                "Insert_or_Update_2": {
                  "actions": {
                    "Update_a_row_2": {
                      "inputs": {
                        "authentication": "@parameters('$authentication')",
                        "host": {
                          "apiId": "/providers/Microsoft.PowerApps/apis/shared_commondataserviceforapps",
                          "connectionName": "shared_commondataserviceforapps",
                          "operationId": "UpdateRecord"
                        },
                        "parameters": {
                          "entityName": "admin_customizedemails",
                          "item/admin_actionname": "@variables('ActionName')",
                          "item/admin_basedon": "@variables('BasedOn')",
                          "item/admin_body": "@if(equals(outputs('Get_Mail_from_Table_2')?['body/admin_defaultbody'], true), variables('Body'), outputs('Get_Mail_from_Table_2')?['body/admin_body'])",
                          "item/admin_flowname": "@variables('FlowName')",
                          "item/admin_language": "en-US",
                          "item/admin_name": "@{variables('FlowName')} -- @{variables('ActionName')} -- en-US",
                          "item/admin_solution": "@variables('Solution')",
                          "item/admin_subject": "@if(equals(outputs('Get_Mail_from_Table_2')?['body/admin_defaultsubject'], true), variables('Subject'), outputs('Get_Mail_from_Table_2')?['body/admin_subject'])",
                          "item/admin_targetaudiance": "@variables('TargetAudiance')",
                          "recordId": "@variables('BasedOn')"
                        },
                        "retryPolicy": {
                          "count": 10,
                          "interval": "PT10S",
                          "type": "exponential"
                        }
                      },
                      "metadata": {
                        "operationMetadataId": "7abc6c14-54b1-4d64-b8d4-76e2b4e3a45d"
                      },
                      "runAfter": {},
                      "type": "OpenApiConnection"
                    }
                  },
                  "else": {
                    "actions": {
                      "Add_a_new_row_2": {
                        "inputs": {
                          "authentication": "@parameters('$authentication')",
                          "host": {
                            "apiId": "/providers/Microsoft.PowerApps/apis/shared_commondataserviceforapps",
                            "connectionName": "shared_commondataserviceforapps",
                            "operationId": "CreateRecord"
                          },
                          "parameters": {
                            "entityName": "admin_customizedemails",
                            "item/admin_actionname": "@variables('ActionName')",
                            "item/admin_basedon": "@variables('BasedOn')",
                            "item/admin_body": "@variables('Body')",
                            "item/admin_customizedemailid": "@variables('BasedOn')",
                            "item/admin_defaultbody": true,
                            "item/admin_defaultsubject": true,
                            "item/admin_flowname": "@variables('FlowName')",
                            "item/admin_language": "en-US",
                            "item/admin_name": "@{variables('FlowName')} -- @{variables('ActionName')} -- en-US",
                            "item/admin_solution": "@variables('Solution')",
                            "item/admin_subject": "@variables('Subject')",
                            "item/admin_targetaudiance": "@variables('TargetAudiance')"
                          },
                          "retryPolicy": {
                            "count": 10,
                            "interval": "PT10S",
                            "type": "exponential"
                          }
                        },
                        "metadata": {
                          "operationMetadataId": "e76b3d9e-99c6-4568-8e10-0ab2fbec197d"
                        },
                        "runAfter": {},
                        "type": "OpenApiConnection"
                      }
                    }
                  },
                  "expression": {
                    "equals": [
                      "@variables('RowExists')",
                      "@true"
                    ]
                  },
                  "metadata": {
                    "operationMetadataId": "f2787280-ba25-4713-85e4-38904c8de61e"
                  },
                  "runAfter": {
                    "Set_RowExists_false_2": [
                      "Succeeded",
                      "Skipped"
                    ]
                  },
                  "type": "If"
                },
                "Reset_RowExists_true_2": {
                  "inputs": {
                    "name": "RowExists",
                    "value": "@true"
                  },
                  "metadata": {
                    "operationMetadataId": "6397c1c6-8485-45e9-ba25-82f5bc9038ba"
                  },
                  "runAfter": {},
                  "type": "SetVariable"
                },
                "Set_RowExists_false_2": {
                  "inputs": {
                    "name": "RowExists",
                    "value": "@false"
                  },
                  "metadata": {
                    "operationMetadataId": "029e2991-e454-4401-b8f6-4832c8d4eef6"
                  },
                  "runAfter": {
                    "Get_Mail_from_Table_2": [
                      "Failed"
                    ]
                  },
                  "type": "SetVariable"
                }
              },
              "metadata": {
                "operationMetadataId": "9059dbb3-0f5e-468d-87a1-8278bc1ffcf0"
              },
              "runAfter": {
                "Setup_Values_2": [
                  "Succeeded"
                ]
              },
              "type": "Scope"
            },
            "Setup_Values_2": {
              "actions": {
                "Set_ActionName_2": {
                  "inputs": {
                    "name": "ActionName",
                    "value": "Send Republish Mail to Owner Apps"
                  },
                  "metadata": {
                    "operationMetadataId": "d4ef3c57-99ff-42c2-9f1c-1bc46e28e6f4"
                  },
                  "runAfter": {
                    "Set_FlowName_2": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_BasedOn_2": {
                  "inputs": {
                    "name": "BasedOn",
                    "value": "4169820e-ca41-ec11-8c62-00224829b4c1"
                  },
                  "metadata": {
                    "operationMetadataId": "e8df03ad-d11c-4e69-b17a-1a0a47ed897c"
                  },
                  "runAfter": {
                    "Set_TargetAudiance_2": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_Body_2": {
                  "inputs": {
                    "name": "Body",
                    "value": "<p>PowerApps</p>\n<p>Keep your app updated to stay compliant.</p>\n<p>You own an app that's currently shared or used broadly but which has not been published recently. It is best practice to test and republish such apps regularly in order to ensure they stay up to date with product changes. <br>\nPlease test and republish the app. You can use the Developer Compliance Center app to view all required work.<br>\n<strong><u>How to become compliant</u></strong><br>\n<ol>\n      <li> Follow the link below </li>\n      <li>View all apps that require work.</li>\n      <li>Test and republish this app.</li>\n    </ol>\n  </li>\n</ol>\n</p>"
                  },
                  "metadata": {
                    "operationMetadataId": "77c5d4cb-e52c-4fb0-80d2-17b10bfbb629"
                  },
                  "runAfter": {
                    "Set_ActionName_2": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_FlowName_2": {
                  "inputs": {
                    "name": "FlowName",
                    "value": "Admin | Compliance detail request v3"
                  },
                  "metadata": {
                    "operationMetadataId": "de56018e-e225-47b5-84c6-4ae0a5ceecd6"
                  },
                  "runAfter": {
                    "Set_Solution_2": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_Solution_2": {
                  "inputs": {
                    "name": "Solution",
                    "value": "Core"
                  },
                  "metadata": {
                    "operationMetadataId": "7c930bfc-1626-45b3-bb86-c4effede2ebc"
                  },
                  "runAfter": {},
                  "type": "SetVariable"
                },
                "Set_Subject_2": {
                  "inputs": {
                    "name": "Subject",
                    "value": "Keep your app updated to stay compliant"
                  },
                  "metadata": {
                    "operationMetadataId": "500f3626-9c4b-40b9-8d56-20354d6bb3ca"
                  },
                  "runAfter": {
                    "Set_Body_2": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_TargetAudiance_2": {
                  "inputs": {
                    "name": "TargetAudiance",
                    "value": "Maker"
                  },
                  "metadata": {
                    "operationMetadataId": "426aa290-9083-4d92-afc1-fc17f2dc7686"
                  },
                  "runAfter": {
                    "Set_Subject_2": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                }
              },
              "metadata": {
                "operationMetadataId": "b369a6a3-d2e6-4446-b7f0-8d7a3ca90f0e"
              },
              "runAfter": {},
              "type": "Scope"
            }
          },
          "metadata": {
            "operationMetadataId": "615339c0-ef5a-4165-8657-fe6fd87f11e5"
          },
          "runAfter": {
            "Admin_|_Sync_Template_v3_(Sync_Flow_Errors)_--_Send_Sync_Flows_to_Admin_": [
              "Succeeded"
            ]
          },
          "type": "Scope"
        },
        "Admin_|_Sync_Template_v3_(Sync_Flow_Errors)_--_Send_Sync_Flows_to_Admin_": {
          "actions": {
            "Insert_or_Update_Row": {
              "actions": {
                "Get_Mail_from_Table": {
                  "inputs": {
                    "authentication": "@parameters('$authentication')",
                    "host": {
                      "apiId": "/providers/Microsoft.PowerApps/apis/shared_commondataserviceforapps",
                      "connectionName": "shared_commondataserviceforapps",
                      "operationId": "GetItem"
                    },
                    "parameters": {
                      "$select": "admin_customizedemailid, admin_defaultbody, admin_defaultsubject, admin_body, admin_subject",
                      "entityName": "admin_customizedemails",
                      "recordId": "@variables('BasedOn')"
                    },
                    "retryPolicy": {
                      "count": 10,
                      "interval": "PT10S",
                      "type": "exponential"
                    }
                  },
                  "metadata": {
                    "operationMetadataId": "b74f8a6f-6a9f-44b0-ab5a-d70254877e8b"
                  },
                  "runAfter": {
                    "Reset_RowExists_true": [
                      "Succeeded"
                    ]
                  },
                  "type": "OpenApiConnection"
                },
                "Insert_or_Update": {
                  "actions": {
                    "Update_a_row": {
                      "inputs": {
                        "authentication": "@parameters('$authentication')",
                        "host": {
                          "apiId": "/providers/Microsoft.PowerApps/apis/shared_commondataserviceforapps",
                          "connectionName": "shared_commondataserviceforapps",
                          "operationId": "UpdateRecord"
                        },
                        "parameters": {
                          "entityName": "admin_customizedemails",
                          "item/admin_actionname": "@variables('ActionName')",
                          "item/admin_basedon": "@variables('BasedOn')",
                          "item/admin_body": "@if(equals(outputs('Get_Mail_from_Table')?['body/admin_defaultbody'], true), variables('Body'), outputs('Get_Mail_from_Table')?['body/admin_body'])",
                          "item/admin_flowname": "@variables('FlowName')",
                          "item/admin_language": "en-US",
                          "item/admin_name": "@{variables('FlowName')} -- @{variables('ActionName')} -- en-US",
                          "item/admin_solution": "@variables('Solution')",
                          "item/admin_subject": "@if(equals(outputs('Get_Mail_from_Table')?['body/admin_defaultsubject'], true), variables('Subject'), outputs('Get_Mail_from_Table')?['body/admin_subject'])",
                          "item/admin_targetaudiance": "@variables('TargetAudiance')",
                          "recordId": "@variables('BasedOn')"
                        },
                        "retryPolicy": {
                          "count": 10,
                          "interval": "PT10S",
                          "type": "exponential"
                        }
                      },
                      "metadata": {
                        "operationMetadataId": "9b49759e-1d18-4076-ab15-0ea28d7eba8c"
                      },
                      "runAfter": {},
                      "type": "OpenApiConnection"
                    }
                  },
                  "else": {
                    "actions": {
                      "Add_a_new_row": {
                        "inputs": {
                          "authentication": "@parameters('$authentication')",
                          "host": {
                            "apiId": "/providers/Microsoft.PowerApps/apis/shared_commondataserviceforapps",
                            "connectionName": "shared_commondataserviceforapps",
                            "operationId": "CreateRecord"
                          },
                          "parameters": {
                            "entityName": "admin_customizedemails",
                            "item/admin_actionname": "@variables('ActionName')",
                            "item/admin_basedon": "@variables('BasedOn')",
                            "item/admin_body": "@variables('Body')",
                            "item/admin_customizedemailid": "@variables('BasedOn')",
                            "item/admin_defaultbody": true,
                            "item/admin_defaultsubject": true,
                            "item/admin_flowname": "@variables('FlowName')",
                            "item/admin_language": "en-US",
                            "item/admin_name": "@{variables('FlowName')} -- @{variables('ActionName')} -- en-US",
                            "item/admin_solution": "@variables('Solution')",
                            "item/admin_subject": "@variables('Subject')",
                            "item/admin_targetaudiance": "@variables('TargetAudiance')"
                          },
                          "retryPolicy": {
                            "count": 10,
                            "interval": "PT10S",
                            "type": "exponential"
                          }
                        },
                        "metadata": {
                          "operationMetadataId": "b01af6f3-5316-451a-b878-f957d2f7df5f"
                        },
                        "runAfter": {},
                        "type": "OpenApiConnection"
                      }
                    }
                  },
                  "expression": {
                    "equals": [
                      "@variables('RowExists')",
                      "@true"
                    ]
                  },
                  "metadata": {
                    "operationMetadataId": "fa758595-cd5b-4f80-a3de-609ff4ac8342"
                  },
                  "runAfter": {
                    "Set_RowExists_false": [
                      "Succeeded",
                      "Skipped"
                    ]
                  },
                  "type": "If"
                },
                "Reset_RowExists_true": {
                  "inputs": {
                    "name": "RowExists",
                    "value": "@true"
                  },
                  "metadata": {
                    "operationMetadataId": "a72f30f5-5a33-4f68-90f9-09d969f33edd"
                  },
                  "runAfter": {},
                  "type": "SetVariable"
                },
                "Set_RowExists_false": {
                  "inputs": {
                    "name": "RowExists",
                    "value": "@false"
                  },
                  "metadata": {
                    "operationMetadataId": "21ab569f-3c00-4b8a-8a9d-7774de6c608f"
                  },
                  "runAfter": {
                    "Get_Mail_from_Table": [
                      "Failed"
                    ]
                  },
                  "type": "SetVariable"
                }
              },
              "metadata": {
                "operationMetadataId": "d1882540-ded5-45af-a548-993c20b33fc4"
              },
              "runAfter": {
                "Setup_Values": [
                  "Succeeded"
                ]
              },
              "type": "Scope"
            },
            "Setup_Values": {
              "actions": {
                "Set_ActionName": {
                  "inputs": {
                    "name": "ActionName",
                    "value": "Send Sync Flows to Admin"
                  },
                  "metadata": {
                    "operationMetadataId": "0a360d09-8f26-4b75-b833-99fcff752670"
                  },
                  "runAfter": {
                    "Set_FlowName": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_BasedOn": {
                  "inputs": {
                    "name": "BasedOn",
                    "value": "432db868-c53d-ec11-8c63-00224829720b"
                  },
                  "metadata": {
                    "operationMetadataId": "6523210a-c35f-4588-8732-426bbee28821"
                  },
                  "runAfter": {
                    "Set_TargetAudiance": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_Body": {
                  "inputs": {
                    "name": "Body",
                    "value": "<p>Some of the Sync Flows in the CoE Starter Kit have failed. See below and navigate to the Flow Instance URL to find out more details:<br><br><strong>\nFailures</strong><br></p>"
                  },
                  "metadata": {
                    "operationMetadataId": "b7412b33-8a38-4062-9f59-ad1780ecf78e"
                  },
                  "runAfter": {
                    "Set_ActionName": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_FlowName": {
                  "inputs": {
                    "name": "FlowName",
                    "value": "Admin | Sync Template v3 (Sync Flow Errors)"
                  },
                  "metadata": {
                    "operationMetadataId": "3f6c64a8-14e3-4f24-ac8e-63adaae931e1"
                  },
                  "runAfter": {
                    "Set_Solution": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_Solution": {
                  "inputs": {
                    "name": "Solution",
                    "value": "Core"
                  },
                  "metadata": {
                    "operationMetadataId": "4ff58fea-89cd-4678-8630-437064ee4fab"
                  },
                  "runAfter": {},
                  "type": "SetVariable"
                },
                "Set_Subject": {
                  "inputs": {
                    "name": "Subject",
                    "value": "Admin | Sync Flow Errors"
                  },
                  "metadata": {
                    "operationMetadataId": "194ef738-2371-4716-968f-91e4db2fba29"
                  },
                  "runAfter": {
                    "Set_Body": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_TargetAudiance": {
                  "inputs": {
                    "name": "TargetAudiance",
                    "value": "Admin"
                  },
                  "metadata": {
                    "operationMetadataId": "6458c68f-aba9-4f2a-a3a3-1a306e098940"
                  },
                  "runAfter": {
                    "Set_Subject": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                }
              },
              "metadata": {
                "operationMetadataId": "9a0537c7-bf8c-4911-8ffa-52990ad48206"
              },
              "runAfter": {},
              "type": "Scope"
            }
          },
          "metadata": {
            "operationMetadataId": "99b401c7-74e0-4724-b487-21dd7b4539c4"
          },
          "runAfter": {
            "Initialize_RowExists_true": [
              "Succeeded"
            ]
          },
          "type": "Scope"
        },
        "Admin_|_Welcome_Email_v3_--_Send_Welcome_Mail": {
          "actions": {
            "Insert_or_Update_Row_8": {
              "actions": {
                "Get_Mail_from_Table_8": {
                  "inputs": {
                    "authentication": "@parameters('$authentication')",
                    "host": {
                      "apiId": "/providers/Microsoft.PowerApps/apis/shared_commondataserviceforapps",
                      "connectionName": "shared_commondataserviceforapps",
                      "operationId": "GetItem"
                    },
                    "parameters": {
                      "$select": "admin_customizedemailid, admin_defaultbody, admin_defaultsubject, admin_body, admin_subject",
                      "entityName": "admin_customizedemails",
                      "recordId": "@variables('BasedOn')"
                    },
                    "retryPolicy": {
                      "count": 10,
                      "interval": "PT10S",
                      "type": "exponential"
                    }
                  },
                  "metadata": {
                    "operationMetadataId": "7a287b9c-2f26-4967-bcc3-2d701ee2c916"
                  },
                  "runAfter": {
                    "Reset_RowExists_true_8": [
                      "Succeeded"
                    ]
                  },
                  "type": "OpenApiConnection"
                },
                "Insert_or_Update_8": {
                  "actions": {
                    "Update_a_row_8": {
                      "inputs": {
                        "authentication": "@parameters('$authentication')",
                        "host": {
                          "apiId": "/providers/Microsoft.PowerApps/apis/shared_commondataserviceforapps",
                          "connectionName": "shared_commondataserviceforapps",
                          "operationId": "UpdateRecord"
                        },
                        "parameters": {
                          "entityName": "admin_customizedemails",
                          "item/admin_actionname": "@variables('ActionName')",
                          "item/admin_basedon": "@variables('BasedOn')",
                          "item/admin_body": "@if(equals(outputs('Get_Mail_from_Table_8')?['body/admin_defaultbody'], true), variables('Body'), outputs('Get_Mail_from_Table_8')?['body/admin_body'])",
                          "item/admin_flowname": "@variables('FlowName')",
                          "item/admin_language": "en-US",
                          "item/admin_name": "@{variables('FlowName')} -- @{variables('ActionName')} -- en-US",
                          "item/admin_solution": "@variables('Solution')",
                          "item/admin_subject": "@if(equals(outputs('Get_Mail_from_Table_8')?['body/admin_defaultsubject'], true), variables('Subject'), outputs('Get_Mail_from_Table_8')?['body/admin_subject'])",
                          "item/admin_targetaudiance": "@variables('TargetAudiance')",
                          "recordId": "@variables('BasedOn')"
                        },
                        "retryPolicy": {
                          "count": 10,
                          "interval": "PT10S",
                          "type": "exponential"
                        }
                      },
                      "metadata": {
                        "operationMetadataId": "8dd2f029-1d37-41c5-bd55-02097b693c75"
                      },
                      "runAfter": {},
                      "type": "OpenApiConnection"
                    }
                  },
                  "else": {
                    "actions": {
                      "Add_a_new_row_8": {
                        "inputs": {
                          "authentication": "@parameters('$authentication')",
                          "host": {
                            "apiId": "/providers/Microsoft.PowerApps/apis/shared_commondataserviceforapps",
                            "connectionName": "shared_commondataserviceforapps",
                            "operationId": "CreateRecord"
                          },
                          "parameters": {
                            "entityName": "admin_customizedemails",
                            "item/admin_actionname": "@variables('ActionName')",
                            "item/admin_basedon": "@variables('BasedOn')",
                            "item/admin_body": "@variables('Body')",
                            "item/admin_customizedemailid": "@variables('BasedOn')",
                            "item/admin_defaultbody": true,
                            "item/admin_defaultsubject": true,
                            "item/admin_flowname": "@variables('FlowName')",
                            "item/admin_language": "en-US",
                            "item/admin_name": "@{variables('FlowName')} -- @{variables('ActionName')} -- en-US",
                            "item/admin_solution": "@variables('Solution')",
                            "item/admin_subject": "@variables('Subject')",
                            "item/admin_targetaudiance": "@variables('TargetAudiance')"
                          },
                          "retryPolicy": {
                            "count": 10,
                            "interval": "PT10S",
                            "type": "exponential"
                          }
                        },
                        "metadata": {
                          "operationMetadataId": "0f65df84-2514-4da6-9e47-1db7be4c9484"
                        },
                        "runAfter": {},
                        "type": "OpenApiConnection"
                      }
                    }
                  },
                  "expression": {
                    "equals": [
                      "@variables('RowExists')",
                      "@true"
                    ]
                  },
                  "metadata": {
                    "operationMetadataId": "461dfe91-a135-4ed3-9d6f-43c1283f1abf"
                  },
                  "runAfter": {
                    "Set_RowExists_false_8": [
                      "Succeeded",
                      "Skipped"
                    ]
                  },
                  "type": "If"
                },
                "Reset_RowExists_true_8": {
                  "inputs": {
                    "name": "RowExists",
                    "value": "@true"
                  },
                  "metadata": {
                    "operationMetadataId": "b77d3cc9-7f56-4a70-a980-36cfbbef6b9c"
                  },
                  "runAfter": {},
                  "type": "SetVariable"
                },
                "Set_RowExists_false_8": {
                  "inputs": {
                    "name": "RowExists",
                    "value": "@false"
                  },
                  "metadata": {
                    "operationMetadataId": "bddaf05b-ec89-4f9c-be1c-a71a2c2d5fe6"
                  },
                  "runAfter": {
                    "Get_Mail_from_Table_8": [
                      "Failed"
                    ]
                  },
                  "type": "SetVariable"
                }
              },
              "metadata": {
                "operationMetadataId": "9475260e-f9ca-4bae-8dc5-b0e3fbce9962"
              },
              "runAfter": {
                "Setup_Values_8": [
                  "Succeeded"
                ]
              },
              "type": "Scope"
            },
            "Setup_Values_8": {
              "actions": {
                "Set_ActionName_8": {
                  "inputs": {
                    "name": "ActionName",
                    "value": "Send Welcome Mail"
                  },
                  "metadata": {
                    "operationMetadataId": "1f2c43df-d69e-4b7b-8678-608ba1799794"
                  },
                  "runAfter": {
                    "Set_FlowName_8": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_BasedOn_8": {
                  "inputs": {
                    "name": "BasedOn",
                    "value": "f530c294-4742-ec11-8c62-00224829bf00"
                  },
                  "metadata": {
                    "operationMetadataId": "4c2d59d1-7577-4d1a-a540-42362a92dca9"
                  },
                  "runAfter": {
                    "Set_TargetAudiance_8": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_Body_8": {
                  "inputs": {
                    "name": "Body",
                    "value": "<p><strong>Welcome to Microsoft Power Platform!</strong><br>\n<br>\n<strong>Power Automate </strong>is an online workflow service that is licensed through our Office 365 entitlement. It is capable of automating events across common apps and services. The Flow service contains over 300 connectors, including corporate and consumer-based services.<br>\n<br>\n<strong>Power Apps</strong> is a suite of apps, services, connectors and data platform that provides a rapid application development environment to build custom apps. Quickly build custom business apps that connect to business data, from the same set of connectors is used by Flow.<br>\n</p>\n<ul>\n  <li><a href=\"https://docs.microsoft.com/en-us/power-automate/\">Power Automate Documentation</a></li>\n  <li><a href=\"https://docs.microsoft.com/en-us/powerapps/\">Power Apps Documentation</a></li>\n  <li><a href=\"https://docs.microsoft.com/en-us/learn/browse/?resource_type=learning%20path&amp;products=flow&amp;utm_source=flow-learn-menu&amp;utm_medium=web\">Power Automate Guided Learning</a></li>\n  <li><a href=\"https://docs.microsoft.com/en-us/learn/browse/\">Power Apps Guided Learning</a></li>\n  <li><a href=\"https://powerapps.microsoft.com/en-us/blog/microsoft-powerapps-learning-resources/\">Learning Resources Blog</a></li>\n  <li><a href=\"https://powerusers.microsoft.com/t5/Microsoft-Flow-Community/ct-p/FlowCommunity\">Power Automate Community Blog</a></li>\n  <li><a href=\"https://powerusers.microsoft.com/t5/Power-Apps-Community/ct-p/PowerApps1\">PowerApps Community</a></li>"
                  },
                  "metadata": {
                    "operationMetadataId": "5860f376-187e-4af4-9dcd-85d6d7cddcc2"
                  },
                  "runAfter": {
                    "Set_ActionName_8": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_FlowName_8": {
                  "inputs": {
                    "name": "FlowName",
                    "value": "Admin | Welcome Email v3"
                  },
                  "metadata": {
                    "operationMetadataId": "a81fa906-0d0d-49f9-b3d3-0c64ea45cda8"
                  },
                  "runAfter": {
                    "Set_Solution_8": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_Solution_8": {
                  "inputs": {
                    "name": "Solution",
                    "value": "Core"
                  },
                  "metadata": {
                    "operationMetadataId": "455751bb-564b-4f72-856e-0972c2935044"
                  },
                  "runAfter": {},
                  "type": "SetVariable"
                },
                "Set_Subject_8": {
                  "inputs": {
                    "name": "Subject",
                    "value": "Welcome to Power Apps and Power Automate"
                  },
                  "metadata": {
                    "operationMetadataId": "dd0a86c7-28bb-490e-80e6-af5532e0069c"
                  },
                  "runAfter": {
                    "Set_Body_8": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_TargetAudiance_8": {
                  "inputs": {
                    "name": "TargetAudiance",
                    "value": "Maker"
                  },
                  "metadata": {
                    "operationMetadataId": "00da5a0d-84b5-4876-9ffc-8ebfb1887575"
                  },
                  "runAfter": {
                    "Set_Subject_8": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                }
              },
              "metadata": {
                "operationMetadataId": "a60c520d-9887-4023-8929-d720c5f6666d"
              },
              "runAfter": {},
              "type": "Scope"
            }
          },
          "metadata": {
            "operationMetadataId": "4f076537-aac2-452a-b4db-51a424de1ea0"
          },
          "runAfter": {
            "Admin_|_Compliance_detail_request_v3_--_Send_Audit_Mail_to_Owner_Bots": [
              "Succeeded"
            ]
          },
          "type": "Scope"
        },
        "Env_Request_|_Cleanup_expired_environments_--_Send_email_Environment_not_found": {
          "actions": {
            "Insert_or_Update_Row_14": {
              "actions": {
                "Get_Mail_from_Table_14": {
                  "inputs": {
                    "authentication": "@parameters('$authentication')",
                    "host": {
                      "apiId": "/providers/Microsoft.PowerApps/apis/shared_commondataserviceforapps",
                      "connectionName": "shared_commondataserviceforapps",
                      "operationId": "GetItem"
                    },
                    "parameters": {
                      "$select": "admin_customizedemailid, admin_defaultbody, admin_defaultsubject, admin_body, admin_subject",
                      "entityName": "admin_customizedemails",
                      "recordId": "@variables('BasedOn')"
                    },
                    "retryPolicy": {
                      "count": 10,
                      "interval": "PT10S",
                      "type": "exponential"
                    }
                  },
                  "metadata": {
                    "operationMetadataId": "af6230fa-2810-4ae3-a5fc-ea9055170575"
                  },
                  "runAfter": {
                    "Reset_RowExists_true_14": [
                      "Succeeded"
                    ]
                  },
                  "type": "OpenApiConnection"
                },
                "Insert_or_Update_14": {
                  "actions": {
                    "Update_a_row_14": {
                      "inputs": {
                        "authentication": "@parameters('$authentication')",
                        "host": {
                          "apiId": "/providers/Microsoft.PowerApps/apis/shared_commondataserviceforapps",
                          "connectionName": "shared_commondataserviceforapps",
                          "operationId": "UpdateRecord"
                        },
                        "parameters": {
                          "entityName": "admin_customizedemails",
                          "item/admin_actionname": "@variables('ActionName')",
                          "item/admin_basedon": "@variables('BasedOn')",
                          "item/admin_body": "@if(equals(outputs('Get_Mail_from_Table_14')?['body/admin_defaultbody'], true), variables('Body'), outputs('Get_Mail_from_Table_14')?['body/admin_body'])",
                          "item/admin_flowname": "@variables('FlowName')",
                          "item/admin_language": "en-US",
                          "item/admin_name": "@{variables('FlowName')} -- @{variables('ActionName')} -- en-US",
                          "item/admin_solution": "@variables('Solution')",
                          "item/admin_subject": "@if(equals(outputs('Get_Mail_from_Table_14')?['body/admin_defaultsubject'], true), variables('Subject'), outputs('Get_Mail_from_Table_14')?['body/admin_subject'])",
                          "item/admin_targetaudiance": "@variables('TargetAudiance')",
                          "recordId": "@variables('BasedOn')"
                        },
                        "retryPolicy": {
                          "count": 10,
                          "interval": "PT10S",
                          "type": "exponential"
                        }
                      },
                      "metadata": {
                        "operationMetadataId": "b61a1e38-9331-4e11-82f6-b6419a66de55"
                      },
                      "runAfter": {},
                      "type": "OpenApiConnection"
                    }
                  },
                  "else": {
                    "actions": {
                      "Add_a_new_row_14": {
                        "inputs": {
                          "authentication": "@parameters('$authentication')",
                          "host": {
                            "apiId": "/providers/Microsoft.PowerApps/apis/shared_commondataserviceforapps",
                            "connectionName": "shared_commondataserviceforapps",
                            "operationId": "CreateRecord"
                          },
                          "parameters": {
                            "entityName": "admin_customizedemails",
                            "item/admin_actionname": "@variables('ActionName')",
                            "item/admin_basedon": "@variables('BasedOn')",
                            "item/admin_body": "@variables('Body')",
                            "item/admin_customizedemailid": "@variables('BasedOn')",
                            "item/admin_defaultbody": true,
                            "item/admin_defaultsubject": true,
                            "item/admin_flowname": "@variables('FlowName')",
                            "item/admin_language": "en-US",
                            "item/admin_name": "@{variables('FlowName')} -- @{variables('ActionName')} -- en-US",
                            "item/admin_solution": "@variables('Solution')",
                            "item/admin_subject": "@variables('Subject')",
                            "item/admin_targetaudiance": "@variables('TargetAudiance')"
                          },
                          "retryPolicy": {
                            "count": 10,
                            "interval": "PT10S",
                            "type": "exponential"
                          }
                        },
                        "metadata": {
                          "operationMetadataId": "2238676b-31b8-4759-a54c-06eeed279953"
                        },
                        "runAfter": {},
                        "type": "OpenApiConnection"
                      }
                    }
                  },
                  "expression": {
                    "equals": [
                      "@variables('RowExists')",
                      "@true"
                    ]
                  },
                  "metadata": {
                    "operationMetadataId": "46db39c6-6e4f-4f83-84a3-463d2c966818"
                  },
                  "runAfter": {
                    "Set_RowExists_false_14": [
                      "Succeeded",
                      "Skipped"
                    ]
                  },
                  "type": "If"
                },
                "Reset_RowExists_true_14": {
                  "inputs": {
                    "name": "RowExists",
                    "value": "@true"
                  },
                  "metadata": {
                    "operationMetadataId": "ddb289b5-c705-4e0c-bad8-421c6049e836"
                  },
                  "runAfter": {},
                  "type": "SetVariable"
                },
                "Set_RowExists_false_14": {
                  "inputs": {
                    "name": "RowExists",
                    "value": "@false"
                  },
                  "metadata": {
                    "operationMetadataId": "88ed872b-d70d-40d4-9964-133f3b7f77be"
                  },
                  "runAfter": {
                    "Get_Mail_from_Table_14": [
                      "Failed"
                    ]
                  },
                  "type": "SetVariable"
                }
              },
              "metadata": {
                "operationMetadataId": "472c5710-f82b-4178-83d0-17ce72c15108"
              },
              "runAfter": {
                "Setup_Values_14": [
                  "Succeeded"
                ]
              },
              "type": "Scope"
            },
            "Setup_Values_14": {
              "actions": {
                "Set_ActionName_14": {
                  "inputs": {
                    "name": "ActionName",
                    "value": "Send email Environment not found"
                  },
                  "metadata": {
                    "operationMetadataId": "b04a59a8-d3ed-4a59-8e11-d2051e8b1512"
                  },
                  "runAfter": {
                    "Set_FlowName_14": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_BasedOn_14": {
                  "inputs": {
                    "name": "BasedOn",
                    "value": "ad142173-2643-ec11-8c62-00224829bf00"
                  },
                  "metadata": {
                    "operationMetadataId": "dc6b5293-8422-4e1e-981b-f343edb20595"
                  },
                  "runAfter": {
                    "Set_TargetAudiance_14": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_Body_14": {
                  "inputs": {
                    "name": "Body",
                    "value": "<p><span style=\"font-size: 16px\"><strong>Notice: Closing the Environment Creation Request record.</strong></span><br>\nAn environment provisioned from an Environment Creation Request ticket that was scheduled to be cleaned up, but was not found.<br>\n<br>\nThis is a notification that the ticket is being closed. No further action is needed.</p>"
                  },
                  "metadata": {
                    "operationMetadataId": "e20f888d-1cea-4cd9-8008-d896e2cbb203"
                  },
                  "runAfter": {
                    "Set_ActionName_14": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_FlowName_14": {
                  "inputs": {
                    "name": "FlowName",
                    "value": "Env Request | Cleanup expired environments"
                  },
                  "metadata": {
                    "operationMetadataId": "c566150f-589b-44b4-a352-0492b3dcce5b"
                  },
                  "runAfter": {
                    "Set_Solution_14": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_Solution_14": {
                  "inputs": {
                    "name": "Solution",
                    "value": "Core"
                  },
                  "metadata": {
                    "operationMetadataId": "88fb6b24-22bc-48b9-b22d-f5803611b2e4"
                  },
                  "runAfter": {},
                  "type": "SetVariable"
                },
                "Set_Subject_14": {
                  "inputs": {
                    "name": "Subject",
                    "value": "Closing the Environment Creation Request record. [No Action Required]"
                  },
                  "metadata": {
                    "operationMetadataId": "827d2a7f-4fda-4a40-ab6a-24cdb2d69ac3"
                  },
                  "runAfter": {
                    "Set_Body_14": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_TargetAudiance_14": {
                  "inputs": {
                    "name": "TargetAudiance",
                    "value": "Maker"
                  },
                  "metadata": {
                    "operationMetadataId": "3c0903ea-b86e-481d-9f63-a2c7207dd43c"
                  },
                  "runAfter": {
                    "Set_Subject_14": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                }
              },
              "metadata": {
                "operationMetadataId": "460687f2-e79e-4829-a29a-7909d07a760d"
              },
              "runAfter": {},
              "type": "Scope"
            }
          },
          "metadata": {
            "operationMetadataId": "029a8fca-3fd3-4d3c-a12b-6217989bf4ed"
          },
          "runAfter": {
            "Env_Request_|_Cleanup_expired_environments_--_Send_email_deletion_failed": [
              "Succeeded"
            ]
          },
          "type": "Scope"
        },
        "Env_Request_|_Cleanup_expired_environments_--_Send_email_deleted_environment": {
          "actions": {
            "Insert_or_Update_Row_12": {
              "actions": {
                "Get_Mail_from_Table_12": {
                  "inputs": {
                    "authentication": "@parameters('$authentication')",
                    "host": {
                      "apiId": "/providers/Microsoft.PowerApps/apis/shared_commondataserviceforapps",
                      "connectionName": "shared_commondataserviceforapps",
                      "operationId": "GetItem"
                    },
                    "parameters": {
                      "$select": "admin_customizedemailid, admin_defaultbody, admin_defaultsubject, admin_body, admin_subject",
                      "entityName": "admin_customizedemails",
                      "recordId": "@variables('BasedOn')"
                    },
                    "retryPolicy": {
                      "count": 10,
                      "interval": "PT10S",
                      "type": "exponential"
                    }
                  },
                  "metadata": {
                    "operationMetadataId": "da8c796a-c8c1-4f94-8d8b-75df7a202727"
                  },
                  "runAfter": {
                    "Reset_RowExists_true_12": [
                      "Succeeded"
                    ]
                  },
                  "type": "OpenApiConnection"
                },
                "Insert_or_Update_12": {
                  "actions": {
                    "Update_a_row_12": {
                      "inputs": {
                        "authentication": "@parameters('$authentication')",
                        "host": {
                          "apiId": "/providers/Microsoft.PowerApps/apis/shared_commondataserviceforapps",
                          "connectionName": "shared_commondataserviceforapps",
                          "operationId": "UpdateRecord"
                        },
                        "parameters": {
                          "entityName": "admin_customizedemails",
                          "item/admin_actionname": "@variables('ActionName')",
                          "item/admin_basedon": "@variables('BasedOn')",
                          "item/admin_body": "@if(equals(outputs('Get_Mail_from_Table_12')?['body/admin_defaultbody'], true), variables('Body'), outputs('Get_Mail_from_Table_12')?['body/admin_body'])",
                          "item/admin_flowname": "@variables('FlowName')",
                          "item/admin_language": "en-US",
                          "item/admin_name": "@{variables('FlowName')} -- @{variables('ActionName')} -- en-US",
                          "item/admin_solution": "@variables('Solution')",
                          "item/admin_subject": "@if(equals(outputs('Get_Mail_from_Table_12')?['body/admin_defaultsubject'], true), variables('Subject'), outputs('Get_Mail_from_Table_12')?['body/admin_subject'])",
                          "item/admin_targetaudiance": "@variables('TargetAudiance')",
                          "recordId": "@variables('BasedOn')"
                        },
                        "retryPolicy": {
                          "count": 10,
                          "interval": "PT10S",
                          "type": "exponential"
                        }
                      },
                      "metadata": {
                        "operationMetadataId": "e5707530-e9db-413e-94dd-29a31f5ba73c"
                      },
                      "runAfter": {},
                      "type": "OpenApiConnection"
                    }
                  },
                  "else": {
                    "actions": {
                      "Add_a_new_row_12": {
                        "inputs": {
                          "authentication": "@parameters('$authentication')",
                          "host": {
                            "apiId": "/providers/Microsoft.PowerApps/apis/shared_commondataserviceforapps",
                            "connectionName": "shared_commondataserviceforapps",
                            "operationId": "CreateRecord"
                          },
                          "parameters": {
                            "entityName": "admin_customizedemails",
                            "item/admin_actionname": "@variables('ActionName')",
                            "item/admin_basedon": "@variables('BasedOn')",
                            "item/admin_body": "@variables('Body')",
                            "item/admin_customizedemailid": "@variables('BasedOn')",
                            "item/admin_defaultbody": true,
                            "item/admin_defaultsubject": true,
                            "item/admin_flowname": "@variables('FlowName')",
                            "item/admin_language": "en-US",
                            "item/admin_name": "@{variables('FlowName')} -- @{variables('ActionName')} -- en-US",
                            "item/admin_solution": "@variables('Solution')",
                            "item/admin_subject": "@variables('Subject')",
                            "item/admin_targetaudiance": "@variables('TargetAudiance')"
                          },
                          "retryPolicy": {
                            "count": 10,
                            "interval": "PT10S",
                            "type": "exponential"
                          }
                        },
                        "metadata": {
                          "operationMetadataId": "b4951a38-d9c4-49c9-9d7c-c4bce0c9cc6b"
                        },
                        "runAfter": {},
                        "type": "OpenApiConnection"
                      }
                    }
                  },
                  "expression": {
                    "equals": [
                      "@variables('RowExists')",
                      "@true"
                    ]
                  },
                  "metadata": {
                    "operationMetadataId": "7f2fa65d-982f-40a7-8596-417ca65f7b19"
                  },
                  "runAfter": {
                    "Set_RowExists_false_12": [
                      "Succeeded",
                      "Skipped"
                    ]
                  },
                  "type": "If"
                },
                "Reset_RowExists_true_12": {
                  "inputs": {
                    "name": "RowExists",
                    "value": "@true"
                  },
                  "metadata": {
                    "operationMetadataId": "3eef310e-cf7a-4b4d-9cb1-c37650ba2117"
                  },
                  "runAfter": {},
                  "type": "SetVariable"
                },
                "Set_RowExists_false_12": {
                  "inputs": {
                    "name": "RowExists",
                    "value": "@false"
                  },
                  "metadata": {
                    "operationMetadataId": "60df78de-a21f-4c70-ae36-738c70cffa08"
                  },
                  "runAfter": {
                    "Get_Mail_from_Table_12": [
                      "Failed"
                    ]
                  },
                  "type": "SetVariable"
                }
              },
              "metadata": {
                "operationMetadataId": "fe69da04-6360-469e-bc7e-2457e0ca6917"
              },
              "runAfter": {
                "Setup_Values_12": [
                  "Succeeded"
                ]
              },
              "type": "Scope"
            },
            "Setup_Values_12": {
              "actions": {
                "Set_ActionName_12": {
                  "inputs": {
                    "name": "ActionName",
                    "value": "Send email deleted environment"
                  },
                  "metadata": {
                    "operationMetadataId": "88920e14-ac2c-41ae-afe2-266037af3ddd"
                  },
                  "runAfter": {
                    "Set_FlowName_12": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_BasedOn_12": {
                  "inputs": {
                    "name": "BasedOn",
                    "value": "aa142173-2643-ec11-8c62-00224829bf00"
                  },
                  "metadata": {
                    "operationMetadataId": "8c0a3330-fc04-4097-9187-16aa2988b449"
                  },
                  "runAfter": {
                    "Set_TargetAudiance_12": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_Body_12": {
                  "inputs": {
                    "name": "Body",
                    "value": "<p><span style=\"font-size: 16px\"><strong>Your Environment has been cleaned up.</strong></span><br>\nThe Environment below has been deleted. The database can be restored by your admin for up to 7 days.<br>\n<br>"
                  },
                  "metadata": {
                    "operationMetadataId": "f3a03d58-d7a8-47c6-8ac6-8e47050770b9"
                  },
                  "runAfter": {
                    "Set_ActionName_12": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_FlowName_12": {
                  "inputs": {
                    "name": "FlowName",
                    "value": "Env Request | Cleanup expired environments"
                  },
                  "metadata": {
                    "operationMetadataId": "0be86811-2b4d-48cd-afe7-842779a18bd9"
                  },
                  "runAfter": {
                    "Set_Solution_12": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_Solution_12": {
                  "inputs": {
                    "name": "Solution",
                    "value": "Core"
                  },
                  "metadata": {
                    "operationMetadataId": "39703fef-90ba-42f3-98f7-40e8778708f6"
                  },
                  "runAfter": {},
                  "type": "SetVariable"
                },
                "Set_Subject_12": {
                  "inputs": {
                    "name": "Subject",
                    "value": "Your Power Platform Environment has been deleted"
                  },
                  "metadata": {
                    "operationMetadataId": "9f06b984-6a46-4e2b-96dc-26ae842cc989"
                  },
                  "runAfter": {
                    "Set_Body_12": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_TargetAudiance_12": {
                  "inputs": {
                    "name": "TargetAudiance",
                    "value": "Maker"
                  },
                  "metadata": {
                    "operationMetadataId": "acd1495d-70b7-4982-a4e5-ecffc6e038c5"
                  },
                  "runAfter": {
                    "Set_Subject_12": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                }
              },
              "metadata": {
                "operationMetadataId": "6224ade9-649d-4c0e-ac5f-58f1771fec1e"
              },
              "runAfter": {},
              "type": "Scope"
            }
          },
          "metadata": {
            "operationMetadataId": "cd85f2f4-aa54-4652-9b03-b0b03b31c3d5"
          },
          "runAfter": {
            "Env_Request_|_Create_approved_environment_--_Environment_provisioning_failed": [
              "Succeeded"
            ]
          },
          "type": "Scope"
        },
        "Env_Request_|_Cleanup_expired_environments_--_Send_email_deletion_failed": {
          "actions": {
            "Insert_or_Update_Row_13": {
              "actions": {
                "Get_Mail_from_Table_13": {
                  "inputs": {
                    "authentication": "@parameters('$authentication')",
                    "host": {
                      "apiId": "/providers/Microsoft.PowerApps/apis/shared_commondataserviceforapps",
                      "connectionName": "shared_commondataserviceforapps",
                      "operationId": "GetItem"
                    },
                    "parameters": {
                      "$select": "admin_customizedemailid, admin_defaultbody, admin_defaultsubject, admin_body, admin_subject",
                      "entityName": "admin_customizedemails",
                      "recordId": "@variables('BasedOn')"
                    },
                    "retryPolicy": {
                      "count": 10,
                      "interval": "PT10S",
                      "type": "exponential"
                    }
                  },
                  "metadata": {
                    "operationMetadataId": "3e281c69-1845-4df5-b59e-a6f331f63a95"
                  },
                  "runAfter": {
                    "Reset_RowExists_true_13": [
                      "Succeeded"
                    ]
                  },
                  "type": "OpenApiConnection"
                },
                "Insert_or_Update_13": {
                  "actions": {
                    "Update_a_row_13": {
                      "inputs": {
                        "authentication": "@parameters('$authentication')",
                        "host": {
                          "apiId": "/providers/Microsoft.PowerApps/apis/shared_commondataserviceforapps",
                          "connectionName": "shared_commondataserviceforapps",
                          "operationId": "UpdateRecord"
                        },
                        "parameters": {
                          "entityName": "admin_customizedemails",
                          "item/admin_actionname": "@variables('ActionName')",
                          "item/admin_basedon": "@variables('BasedOn')",
                          "item/admin_body": "@if(equals(outputs('Get_Mail_from_Table_13')?['body/admin_defaultbody'], true), variables('Body'), outputs('Get_Mail_from_Table_13')?['body/admin_body'])",
                          "item/admin_flowname": "@variables('FlowName')",
                          "item/admin_language": "en-US",
                          "item/admin_name": "@{variables('FlowName')} -- @{variables('ActionName')} -- en-US",
                          "item/admin_solution": "@variables('Solution')",
                          "item/admin_subject": "@if(equals(outputs('Get_Mail_from_Table_13')?['body/admin_defaultsubject'], true), variables('Subject'), outputs('Get_Mail_from_Table_13')?['body/admin_subject'])",
                          "item/admin_targetaudiance": "@variables('TargetAudiance')",
                          "recordId": "@variables('BasedOn')"
                        },
                        "retryPolicy": {
                          "count": 10,
                          "interval": "PT10S",
                          "type": "exponential"
                        }
                      },
                      "metadata": {
                        "operationMetadataId": "d47da36c-f978-4970-946c-338d010059d1"
                      },
                      "runAfter": {},
                      "type": "OpenApiConnection"
                    }
                  },
                  "else": {
                    "actions": {
                      "Add_a_new_row_13": {
                        "inputs": {
                          "authentication": "@parameters('$authentication')",
                          "host": {
                            "apiId": "/providers/Microsoft.PowerApps/apis/shared_commondataserviceforapps",
                            "connectionName": "shared_commondataserviceforapps",
                            "operationId": "CreateRecord"
                          },
                          "parameters": {
                            "entityName": "admin_customizedemails",
                            "item/admin_actionname": "@variables('ActionName')",
                            "item/admin_basedon": "@variables('BasedOn')",
                            "item/admin_body": "@variables('Body')",
                            "item/admin_customizedemailid": "@variables('BasedOn')",
                            "item/admin_defaultbody": true,
                            "item/admin_defaultsubject": true,
                            "item/admin_flowname": "@variables('FlowName')",
                            "item/admin_language": "en-US",
                            "item/admin_name": "@{variables('FlowName')} -- @{variables('ActionName')} -- en-US",
                            "item/admin_solution": "@variables('Solution')",
                            "item/admin_subject": "@variables('Subject')",
                            "item/admin_targetaudiance": "@variables('TargetAudiance')"
                          },
                          "retryPolicy": {
                            "count": 10,
                            "interval": "PT10S",
                            "type": "exponential"
                          }
                        },
                        "metadata": {
                          "operationMetadataId": "7d72289d-edd4-4f30-8879-d2cb455fb0a4"
                        },
                        "runAfter": {},
                        "type": "OpenApiConnection"
                      }
                    }
                  },
                  "expression": {
                    "equals": [
                      "@variables('RowExists')",
                      "@true"
                    ]
                  },
                  "metadata": {
                    "operationMetadataId": "7b900f34-bfc8-40dc-8908-67f0f8575543"
                  },
                  "runAfter": {
                    "Set_RowExists_false_13": [
                      "Succeeded",
                      "Skipped"
                    ]
                  },
                  "type": "If"
                },
                "Reset_RowExists_true_13": {
                  "inputs": {
                    "name": "RowExists",
                    "value": "@true"
                  },
                  "metadata": {
                    "operationMetadataId": "a407668e-62c4-4041-9bf5-43f00aaca67d"
                  },
                  "runAfter": {},
                  "type": "SetVariable"
                },
                "Set_RowExists_false_13": {
                  "inputs": {
                    "name": "RowExists",
                    "value": "@false"
                  },
                  "metadata": {
                    "operationMetadataId": "0205af6e-118f-4077-8756-8567aebeec20"
                  },
                  "runAfter": {
                    "Get_Mail_from_Table_13": [
                      "Failed"
                    ]
                  },
                  "type": "SetVariable"
                }
              },
              "metadata": {
                "operationMetadataId": "abc65432-d4ec-4f89-8466-02dd34835c0e"
              },
              "runAfter": {
                "Setup_Values_13": [
                  "Succeeded"
                ]
              },
              "type": "Scope"
            },
            "Setup_Values_13": {
              "actions": {
                "Set_ActionName_13": {
                  "inputs": {
                    "name": "ActionName",
                    "value": "Send email deletion failed"
                  },
                  "metadata": {
                    "operationMetadataId": "d9045659-6254-4f18-a3a5-67f4a5b8d22a"
                  },
                  "runAfter": {
                    "Set_FlowName_13": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_BasedOn_13": {
                  "inputs": {
                    "name": "BasedOn",
                    "value": "ab142173-2643-ec11-8c62-00224829bf00"
                  },
                  "metadata": {
                    "operationMetadataId": "e455ad3b-d53c-4941-ae11-0189396233f0"
                  },
                  "runAfter": {
                    "Set_TargetAudiance_13": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_Body_13": {
                  "inputs": {
                    "name": "Body",
                    "value": "<p><span style=\"font-size: 16px\"><strong>There was a problem cleaning up an environment.</strong></span><br>\n<br>\nThere was an issue deleting an environment that was created by an Environment Creation Request. Please confirm if the environment still exists and mange it further (e.g., delete the environment manually) in the Power Platform Admin Center (https://admin.powerplatform.microsoft.com).<br>\n<br>"
                  },
                  "metadata": {
                    "operationMetadataId": "88050fee-9258-4690-9d32-94d4756f3685"
                  },
                  "runAfter": {
                    "Set_ActionName_13": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_FlowName_13": {
                  "inputs": {
                    "name": "FlowName",
                    "value": "Env Request | Cleanup expired environments"
                  },
                  "metadata": {
                    "operationMetadataId": "3426b311-2490-4938-9d1a-b36d5e67a707"
                  },
                  "runAfter": {
                    "Set_Solution_13": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_Solution_13": {
                  "inputs": {
                    "name": "Solution",
                    "value": "Core"
                  },
                  "metadata": {
                    "operationMetadataId": "a08cfe83-29a9-4ebf-b47a-219f0a6ccb71"
                  },
                  "runAfter": {},
                  "type": "SetVariable"
                },
                "Set_Subject_13": {
                  "inputs": {
                    "name": "Subject",
                    "value": "Power Platform Environment cleanup failed "
                  },
                  "metadata": {
                    "operationMetadataId": "f1ec7fce-696c-406e-a3c4-be8c829569e1"
                  },
                  "runAfter": {
                    "Set_Body_13": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_TargetAudiance_13": {
                  "inputs": {
                    "name": "TargetAudiance",
                    "value": "Maker"
                  },
                  "metadata": {
                    "operationMetadataId": "1821c4fc-9f1f-44e4-9ae5-1a82c8f5307c"
                  },
                  "runAfter": {
                    "Set_Subject_13": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                }
              },
              "metadata": {
                "operationMetadataId": "e59ed054-80f5-4bc8-9973-c25758b2f5ad"
              },
              "runAfter": {},
              "type": "Scope"
            }
          },
          "metadata": {
            "operationMetadataId": "af380ef1-861c-4d53-a6f4-080dfc7b8260"
          },
          "runAfter": {
            "Env_Request_|_Cleanup_expired_environments_--_Send_email_deleted_environment": [
              "Succeeded"
            ]
          },
          "type": "Scope"
        },
        "Env_Request_|_Cleanup_expired_environments_--_Send_email_upcoming_deletion": {
          "actions": {
            "Insert_or_Update_Row_15": {
              "actions": {
                "Get_Mail_from_Table_15": {
                  "inputs": {
                    "authentication": "@parameters('$authentication')",
                    "host": {
                      "apiId": "/providers/Microsoft.PowerApps/apis/shared_commondataserviceforapps",
                      "connectionName": "shared_commondataserviceforapps",
                      "operationId": "GetItem"
                    },
                    "parameters": {
                      "$select": "admin_customizedemailid, admin_defaultbody, admin_defaultsubject, admin_body, admin_subject",
                      "entityName": "admin_customizedemails",
                      "recordId": "@variables('BasedOn')"
                    },
                    "retryPolicy": {
                      "count": 10,
                      "interval": "PT10S",
                      "type": "exponential"
                    }
                  },
                  "metadata": {
                    "operationMetadataId": "c5fd6456-29f0-4baa-90ce-fa52f4794d72"
                  },
                  "runAfter": {
                    "Reset_RowExists_true_15": [
                      "Succeeded"
                    ]
                  },
                  "type": "OpenApiConnection"
                },
                "Insert_or_Update_15": {
                  "actions": {
                    "Update_a_row_15": {
                      "inputs": {
                        "authentication": "@parameters('$authentication')",
                        "host": {
                          "apiId": "/providers/Microsoft.PowerApps/apis/shared_commondataserviceforapps",
                          "connectionName": "shared_commondataserviceforapps",
                          "operationId": "UpdateRecord"
                        },
                        "parameters": {
                          "entityName": "admin_customizedemails",
                          "item/admin_actionname": "@variables('ActionName')",
                          "item/admin_basedon": "@variables('BasedOn')",
                          "item/admin_body": "@if(equals(outputs('Get_Mail_from_Table_15')?['body/admin_defaultbody'], true), variables('Body'), outputs('Get_Mail_from_Table_15')?['body/admin_body'])",
                          "item/admin_flowname": "@variables('FlowName')",
                          "item/admin_language": "en-US",
                          "item/admin_name": "@{variables('FlowName')} -- @{variables('ActionName')} -- en-US",
                          "item/admin_solution": "@variables('Solution')",
                          "item/admin_subject": "@if(equals(outputs('Get_Mail_from_Table_15')?['body/admin_defaultsubject'], true), variables('Subject'), outputs('Get_Mail_from_Table_15')?['body/admin_subject'])",
                          "item/admin_targetaudiance": "@variables('TargetAudiance')",
                          "recordId": "@variables('BasedOn')"
                        },
                        "retryPolicy": {
                          "count": 10,
                          "interval": "PT10S",
                          "type": "exponential"
                        }
                      },
                      "metadata": {
                        "operationMetadataId": "c34046a6-17cf-485e-a77e-add1731b9c33"
                      },
                      "runAfter": {},
                      "type": "OpenApiConnection"
                    }
                  },
                  "else": {
                    "actions": {
                      "Add_a_new_row_15": {
                        "inputs": {
                          "authentication": "@parameters('$authentication')",
                          "host": {
                            "apiId": "/providers/Microsoft.PowerApps/apis/shared_commondataserviceforapps",
                            "connectionName": "shared_commondataserviceforapps",
                            "operationId": "CreateRecord"
                          },
                          "parameters": {
                            "entityName": "admin_customizedemails",
                            "item/admin_actionname": "@variables('ActionName')",
                            "item/admin_basedon": "@variables('BasedOn')",
                            "item/admin_body": "@variables('Body')",
                            "item/admin_customizedemailid": "@variables('BasedOn')",
                            "item/admin_defaultbody": true,
                            "item/admin_defaultsubject": true,
                            "item/admin_flowname": "@variables('FlowName')",
                            "item/admin_language": "en-US",
                            "item/admin_name": "@{variables('FlowName')} -- @{variables('ActionName')} -- en-US",
                            "item/admin_solution": "@variables('Solution')",
                            "item/admin_subject": "@variables('Subject')",
                            "item/admin_targetaudiance": "@variables('TargetAudiance')"
                          },
                          "retryPolicy": {
                            "count": 10,
                            "interval": "PT10S",
                            "type": "exponential"
                          }
                        },
                        "metadata": {
                          "operationMetadataId": "013e0a7d-6df7-4523-8bb4-33ac0935ebd9"
                        },
                        "runAfter": {},
                        "type": "OpenApiConnection"
                      }
                    }
                  },
                  "expression": {
                    "equals": [
                      "@variables('RowExists')",
                      "@true"
                    ]
                  },
                  "metadata": {
                    "operationMetadataId": "7889b338-f53f-4d68-9710-a6ee294eb9a3"
                  },
                  "runAfter": {
                    "Set_RowExists_false_15": [
                      "Succeeded",
                      "Skipped"
                    ]
                  },
                  "type": "If"
                },
                "Reset_RowExists_true_15": {
                  "inputs": {
                    "name": "RowExists",
                    "value": "@true"
                  },
                  "metadata": {
                    "operationMetadataId": "eb693b58-fd6c-4eed-8fbf-636f0e4794dc"
                  },
                  "runAfter": {},
                  "type": "SetVariable"
                },
                "Set_RowExists_false_15": {
                  "inputs": {
                    "name": "RowExists",
                    "value": "@false"
                  },
                  "metadata": {
                    "operationMetadataId": "ce397321-32d3-496a-9b6a-59039dac127d"
                  },
                  "runAfter": {
                    "Get_Mail_from_Table_15": [
                      "Failed"
                    ]
                  },
                  "type": "SetVariable"
                }
              },
              "metadata": {
                "operationMetadataId": "3d838ec0-d1ce-4330-bd1c-6b28bac5f78e"
              },
              "runAfter": {
                "Setup_Values_15": [
                  "Succeeded"
                ]
              },
              "type": "Scope"
            },
            "Setup_Values_15": {
              "actions": {
                "Set_ActionName_15": {
                  "inputs": {
                    "name": "ActionName",
                    "value": "Send email upcoming deletion warning"
                  },
                  "metadata": {
                    "operationMetadataId": "0c2466e7-45f6-4907-8edc-78090663abdc"
                  },
                  "runAfter": {
                    "Set_FlowName_15": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_BasedOn_15": {
                  "inputs": {
                    "name": "BasedOn",
                    "value": "ae142173-2643-ec11-8c62-00224829bf00"
                  },
                  "metadata": {
                    "operationMetadataId": "7b259aef-061f-4b96-8404-eaa073f2471d"
                  },
                  "runAfter": {
                    "Set_TargetAudiance_15": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_Body_15": {
                  "inputs": {
                    "name": "Body",
                    "value": "<p>Your Power Platform Environment will be cleaned up soon. Please save all work in the environment to source control or storage external to the environment before it is deleted. Once the environment has been deleted, the admin can restor it for up to 7 days.<br>\n<br>"
                  },
                  "metadata": {
                    "operationMetadataId": "0d196a33-86ad-48eb-943c-5d704a3dd21c"
                  },
                  "runAfter": {
                    "Set_ActionName_15": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_FlowName_15": {
                  "inputs": {
                    "name": "FlowName",
                    "value": "Env Request | Cleanup expired environments"
                  },
                  "metadata": {
                    "operationMetadataId": "7c231d10-6efa-4c81-b33f-c92e663d99bc"
                  },
                  "runAfter": {
                    "Set_Solution_15": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_Solution_15": {
                  "inputs": {
                    "name": "Solution",
                    "value": "Core"
                  },
                  "metadata": {
                    "operationMetadataId": "d54cc840-1683-4a86-a6a9-07b79b016b5c"
                  },
                  "runAfter": {},
                  "type": "SetVariable"
                },
                "Set_Subject_15": {
                  "inputs": {
                    "name": "Subject",
                    "value": "Warning: Your Power Platform Environment will be deleted soon"
                  },
                  "metadata": {
                    "operationMetadataId": "1ee74035-2b7e-4644-a3a4-5e0e01a9f564"
                  },
                  "runAfter": {
                    "Set_Body_15": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_TargetAudiance_15": {
                  "inputs": {
                    "name": "TargetAudiance",
                    "value": "Maker"
                  },
                  "metadata": {
                    "operationMetadataId": "b59d0c58-bd9e-4835-9b6a-74910eeec34d"
                  },
                  "runAfter": {
                    "Set_Subject_15": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                }
              },
              "metadata": {
                "operationMetadataId": "e2b3301f-2c62-4a77-a0e4-8736f630b4d0"
              },
              "runAfter": {},
              "type": "Scope"
            }
          },
          "metadata": {
            "operationMetadataId": "a5e70855-6650-4f4c-b9e5-370f87c21751"
          },
          "runAfter": {
            "Env_Request_|_Cleanup_expired_environments_--_Send_email_Environment_not_found": [
              "Succeeded"
            ]
          },
          "type": "Scope"
        },
        "Env_Request_|_Create_approved_environment_--_Environment_provisioning_failed": {
          "actions": {
            "Insert_or_Update_Row_11": {
              "actions": {
                "Get_Mail_from_Table_11": {
                  "inputs": {
                    "authentication": "@parameters('$authentication')",
                    "host": {
                      "apiId": "/providers/Microsoft.PowerApps/apis/shared_commondataserviceforapps",
                      "connectionName": "shared_commondataserviceforapps",
                      "operationId": "GetItem"
                    },
                    "parameters": {
                      "$select": "admin_customizedemailid, admin_defaultbody, admin_defaultsubject, admin_body, admin_subject",
                      "entityName": "admin_customizedemails",
                      "recordId": "@variables('BasedOn')"
                    },
                    "retryPolicy": {
                      "count": 10,
                      "interval": "PT10S",
                      "type": "exponential"
                    }
                  },
                  "metadata": {
                    "operationMetadataId": "81ecc4ee-cdf0-4438-a92f-beb7c42068de"
                  },
                  "runAfter": {
                    "Reset_RowExists_true_11": [
                      "Succeeded"
                    ]
                  },
                  "type": "OpenApiConnection"
                },
                "Insert_or_Update_11": {
                  "actions": {
                    "Update_a_row_11": {
                      "inputs": {
                        "authentication": "@parameters('$authentication')",
                        "host": {
                          "apiId": "/providers/Microsoft.PowerApps/apis/shared_commondataserviceforapps",
                          "connectionName": "shared_commondataserviceforapps",
                          "operationId": "UpdateRecord"
                        },
                        "parameters": {
                          "entityName": "admin_customizedemails",
                          "item/admin_actionname": "@variables('ActionName')",
                          "item/admin_basedon": "@variables('BasedOn')",
                          "item/admin_body": "@if(equals(outputs('Get_Mail_from_Table_11')?['body/admin_defaultbody'], true), variables('Body'), outputs('Get_Mail_from_Table_11')?['body/admin_body'])",
                          "item/admin_flowname": "@variables('FlowName')",
                          "item/admin_language": "en-US",
                          "item/admin_name": "@{variables('FlowName')} -- @{variables('ActionName')} -- en-US",
                          "item/admin_solution": "@variables('Solution')",
                          "item/admin_subject": "@if(equals(outputs('Get_Mail_from_Table_11')?['body/admin_defaultsubject'], true), variables('Subject'), outputs('Get_Mail_from_Table_11')?['body/admin_subject'])",
                          "item/admin_targetaudiance": "@variables('TargetAudiance')",
                          "recordId": "@variables('BasedOn')"
                        },
                        "retryPolicy": {
                          "count": 10,
                          "interval": "PT10S",
                          "type": "exponential"
                        }
                      },
                      "metadata": {
                        "operationMetadataId": "543dd6b6-c7cc-4dcf-8a82-b0564da2744e"
                      },
                      "runAfter": {},
                      "type": "OpenApiConnection"
                    }
                  },
                  "else": {
                    "actions": {
                      "Add_a_new_row_11": {
                        "inputs": {
                          "authentication": "@parameters('$authentication')",
                          "host": {
                            "apiId": "/providers/Microsoft.PowerApps/apis/shared_commondataserviceforapps",
                            "connectionName": "shared_commondataserviceforapps",
                            "operationId": "CreateRecord"
                          },
                          "parameters": {
                            "entityName": "admin_customizedemails",
                            "item/admin_actionname": "@variables('ActionName')",
                            "item/admin_basedon": "@variables('BasedOn')",
                            "item/admin_body": "@variables('Body')",
                            "item/admin_customizedemailid": "@variables('BasedOn')",
                            "item/admin_defaultbody": true,
                            "item/admin_defaultsubject": true,
                            "item/admin_flowname": "@variables('FlowName')",
                            "item/admin_language": "en-US",
                            "item/admin_name": "@{variables('FlowName')} -- @{variables('ActionName')} -- en-US",
                            "item/admin_solution": "@variables('Solution')",
                            "item/admin_subject": "@variables('Subject')",
                            "item/admin_targetaudiance": "@variables('TargetAudiance')"
                          },
                          "retryPolicy": {
                            "count": 10,
                            "interval": "PT10S",
                            "type": "exponential"
                          }
                        },
                        "metadata": {
                          "operationMetadataId": "44705746-9373-4c08-a505-241da93b359b"
                        },
                        "runAfter": {},
                        "type": "OpenApiConnection"
                      }
                    }
                  },
                  "expression": {
                    "equals": [
                      "@variables('RowExists')",
                      "@true"
                    ]
                  },
                  "metadata": {
                    "operationMetadataId": "8e0f3cce-4a9c-416b-af38-baf0feaefd53"
                  },
                  "runAfter": {
                    "Set_RowExists_false_11": [
                      "Succeeded",
                      "Skipped"
                    ]
                  },
                  "type": "If"
                },
                "Reset_RowExists_true_11": {
                  "inputs": {
                    "name": "RowExists",
                    "value": "@true"
                  },
                  "metadata": {
                    "operationMetadataId": "e24cd97d-5d02-4426-b21f-68e5fea492c5"
                  },
                  "runAfter": {},
                  "type": "SetVariable"
                },
                "Set_RowExists_false_11": {
                  "inputs": {
                    "name": "RowExists",
                    "value": "@false"
                  },
                  "metadata": {
                    "operationMetadataId": "431d210c-ce2b-4bf7-a806-f7dec4b74f19"
                  },
                  "runAfter": {
                    "Get_Mail_from_Table_11": [
                      "Failed"
                    ]
                  },
                  "type": "SetVariable"
                }
              },
              "metadata": {
                "operationMetadataId": "b8940ef0-58c8-4cc3-8a79-f54085a4f3d4"
              },
              "runAfter": {
                "Setup_Values_11": [
                  "Succeeded"
                ]
              },
              "type": "Scope"
            },
            "Setup_Values_11": {
              "actions": {
                "Set_ActionName_11": {
                  "inputs": {
                    "name": "ActionName",
                    "value": "Environment provisioning failed"
                  },
                  "metadata": {
                    "operationMetadataId": "05c9d69c-1cb3-4be5-9f34-a476a5fb1b4b"
                  },
                  "runAfter": {
                    "Set_FlowName_11": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_BasedOn_11": {
                  "inputs": {
                    "name": "BasedOn",
                    "value": "bea55af1-2343-ec11-8c62-00224829bf00"
                  },
                  "metadata": {
                    "operationMetadataId": "2bcf10a3-a6f1-4edd-b71a-82af7382f245"
                  },
                  "runAfter": {
                    "Set_TargetAudiance_11": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_Body_11": {
                  "inputs": {
                    "name": "Body",
                    "value": "<p><span style=\"font-size: 16px\"><strong>Notice: There was a problem provisioning the Environment.</strong></span><br>\nThe approved Environment Creation Request was not completed, and the record has been closed. Please evaluate the error message and review the issue in the flow run history, then re-submit the request.<br>\n<br>"
                  },
                  "metadata": {
                    "operationMetadataId": "e96c6b11-e852-441e-83b3-b1bcc540f03c"
                  },
                  "runAfter": {
                    "Set_ActionName_11": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_FlowName_11": {
                  "inputs": {
                    "name": "FlowName",
                    "value": "Env Request | Create approved environment"
                  },
                  "metadata": {
                    "operationMetadataId": "2a5b5ec9-9674-4cb5-9c63-e1f57b4b9e26"
                  },
                  "runAfter": {
                    "Set_Solution_11": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_Solution_11": {
                  "inputs": {
                    "name": "Solution",
                    "value": "Core"
                  },
                  "metadata": {
                    "operationMetadataId": "35e6865b-40a7-4242-830f-1b39897a1715"
                  },
                  "runAfter": {},
                  "type": "SetVariable"
                },
                "Set_Subject_11": {
                  "inputs": {
                    "name": "Subject",
                    "value": "There was an issue processing an Environment Creation Request"
                  },
                  "metadata": {
                    "operationMetadataId": "5878bc85-1f10-4969-95c5-df20891735eb"
                  },
                  "runAfter": {
                    "Set_Body_11": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_TargetAudiance_11": {
                  "inputs": {
                    "name": "TargetAudiance",
                    "value": "Admin"
                  },
                  "metadata": {
                    "operationMetadataId": "5da0ceb0-7e81-4c00-9a8c-fe7c1e74b6f4"
                  },
                  "runAfter": {
                    "Set_Subject_11": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                }
              },
              "metadata": {
                "operationMetadataId": "db63a3a7-a573-4830-9ad8-2d3326544ec9"
              },
              "runAfter": {},
              "type": "Scope"
            }
          },
          "metadata": {
            "operationMetadataId": "41d1e3ba-83c6-4f36-aade-034c7aca095a"
          },
          "runAfter": {
            "Env_Request_|_Create_approved_environment_--_Send_email_Environment_is_live": [
              "Succeeded"
            ]
          },
          "type": "Scope"
        },
        "Env_Request_|_Create_approved_environment_--_Send_email_Environment_is_live": {
          "actions": {
            "Insert_or_Update_Row_10": {
              "actions": {
                "Get_Mail_from_Table_10": {
                  "inputs": {
                    "authentication": "@parameters('$authentication')",
                    "host": {
                      "apiId": "/providers/Microsoft.PowerApps/apis/shared_commondataserviceforapps",
                      "connectionName": "shared_commondataserviceforapps",
                      "operationId": "GetItem"
                    },
                    "parameters": {
                      "$select": "admin_customizedemailid, admin_defaultbody, admin_defaultsubject, admin_body, admin_subject",
                      "entityName": "admin_customizedemails",
                      "recordId": "@variables('BasedOn')"
                    },
                    "retryPolicy": {
                      "count": 10,
                      "interval": "PT10S",
                      "type": "exponential"
                    }
                  },
                  "metadata": {
                    "operationMetadataId": "64bf7b44-7a86-43e6-ba16-e4e42c1111bc"
                  },
                  "runAfter": {
                    "Reset_RowExists_true_10": [
                      "Succeeded"
                    ]
                  },
                  "type": "OpenApiConnection"
                },
                "Insert_or_Update_10": {
                  "actions": {
                    "Update_a_row_10": {
                      "inputs": {
                        "authentication": "@parameters('$authentication')",
                        "host": {
                          "apiId": "/providers/Microsoft.PowerApps/apis/shared_commondataserviceforapps",
                          "connectionName": "shared_commondataserviceforapps",
                          "operationId": "UpdateRecord"
                        },
                        "parameters": {
                          "entityName": "admin_customizedemails",
                          "item/admin_actionname": "@variables('ActionName')",
                          "item/admin_basedon": "@variables('BasedOn')",
                          "item/admin_body": "@if(equals(outputs('Get_Mail_from_Table_10')?['body/admin_defaultbody'], true), variables('Body'), outputs('Get_Mail_from_Table_10')?['body/admin_body'])",
                          "item/admin_flowname": "@variables('FlowName')",
                          "item/admin_language": "en-US",
                          "item/admin_name": "@{variables('FlowName')} -- @{variables('ActionName')} -- en-US",
                          "item/admin_solution": "@variables('Solution')",
                          "item/admin_subject": "@if(equals(outputs('Get_Mail_from_Table_10')?['body/admin_defaultsubject'], true), variables('Subject'), outputs('Get_Mail_from_Table_10')?['body/admin_subject'])",
                          "item/admin_targetaudiance": "@variables('TargetAudiance')",
                          "recordId": "@variables('BasedOn')"
                        },
                        "retryPolicy": {
                          "count": 10,
                          "interval": "PT10S",
                          "type": "exponential"
                        }
                      },
                      "metadata": {
                        "operationMetadataId": "2b67f664-a119-4adf-9d7e-6533d60b9d26"
                      },
                      "runAfter": {},
                      "type": "OpenApiConnection"
                    }
                  },
                  "else": {
                    "actions": {
                      "Add_a_new_row_10": {
                        "inputs": {
                          "authentication": "@parameters('$authentication')",
                          "host": {
                            "apiId": "/providers/Microsoft.PowerApps/apis/shared_commondataserviceforapps",
                            "connectionName": "shared_commondataserviceforapps",
                            "operationId": "CreateRecord"
                          },
                          "parameters": {
                            "entityName": "admin_customizedemails",
                            "item/admin_actionname": "@variables('ActionName')",
                            "item/admin_basedon": "@variables('BasedOn')",
                            "item/admin_body": "@variables('Body')",
                            "item/admin_customizedemailid": "@variables('BasedOn')",
                            "item/admin_defaultbody": true,
                            "item/admin_defaultsubject": true,
                            "item/admin_flowname": "@variables('FlowName')",
                            "item/admin_language": "en-US",
                            "item/admin_name": "@{variables('FlowName')} -- @{variables('ActionName')} -- en-US",
                            "item/admin_solution": "@variables('Solution')",
                            "item/admin_subject": "@variables('Subject')",
                            "item/admin_targetaudiance": "@variables('TargetAudiance')"
                          },
                          "retryPolicy": {
                            "count": 10,
                            "interval": "PT10S",
                            "type": "exponential"
                          }
                        },
                        "metadata": {
                          "operationMetadataId": "1a3e099c-3633-44a6-a135-19b40b57bd32"
                        },
                        "runAfter": {},
                        "type": "OpenApiConnection"
                      }
                    }
                  },
                  "expression": {
                    "equals": [
                      "@variables('RowExists')",
                      "@true"
                    ]
                  },
                  "metadata": {
                    "operationMetadataId": "a0ae0bbf-8e45-4f3a-b726-7fa77349bc5a"
                  },
                  "runAfter": {
                    "Set_RowExists_false_10": [
                      "Succeeded",
                      "Skipped"
                    ]
                  },
                  "type": "If"
                },
                "Reset_RowExists_true_10": {
                  "inputs": {
                    "name": "RowExists",
                    "value": "@true"
                  },
                  "metadata": {
                    "operationMetadataId": "82f4a253-d19f-468f-98ad-5a1d8489244f"
                  },
                  "runAfter": {},
                  "type": "SetVariable"
                },
                "Set_RowExists_false_10": {
                  "inputs": {
                    "name": "RowExists",
                    "value": "@false"
                  },
                  "metadata": {
                    "operationMetadataId": "c73a383a-f447-4065-be3f-c27f797e3038"
                  },
                  "runAfter": {
                    "Get_Mail_from_Table_10": [
                      "Failed"
                    ]
                  },
                  "type": "SetVariable"
                }
              },
              "metadata": {
                "operationMetadataId": "88139674-0026-4ce3-a99c-c5074bcbb453"
              },
              "runAfter": {
                "Setup_Values_10": [
                  "Succeeded"
                ]
              },
              "type": "Scope"
            },
            "Setup_Values_10": {
              "actions": {
                "Set_ActionName_10": {
                  "inputs": {
                    "name": "ActionName",
                    "value": "Send email Environment is live"
                  },
                  "metadata": {
                    "operationMetadataId": "5365e806-a350-4ad8-91f2-44102fa826a5"
                  },
                  "runAfter": {
                    "Set_FlowName_10": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_BasedOn_10": {
                  "inputs": {
                    "name": "BasedOn",
                    "value": "79030d17-1e43-ec11-8c62-00224829bf00"
                  },
                  "metadata": {
                    "operationMetadataId": "5e976c7e-4e7c-4362-8ecc-e3b73e7856a9"
                  },
                  "runAfter": {
                    "Set_TargetAudiance_10": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_Body_10": {
                  "inputs": {
                    "name": "Body",
                    "value": "<p><span style=\"font-size: 16px\"><strong>Your new Power Platform Environment has been created.</strong></span><br>\nYour request to create the new Power Platform environment has been approved. You are now the adminstrator of the environment.<br>\n<br>\nAccess your environment in the maker portal here:<br>"
                  },
                  "metadata": {
                    "operationMetadataId": "24efd7e5-742b-4019-9129-1b304ffb5f3e"
                  },
                  "runAfter": {
                    "Set_ActionName_10": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_FlowName_10": {
                  "inputs": {
                    "name": "FlowName",
                    "value": "Env Request | Create approved environment"
                  },
                  "metadata": {
                    "operationMetadataId": "c1754745-d8c3-4c12-9c81-18bd2dbcec2b"
                  },
                  "runAfter": {
                    "Set_Solution_10": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_Solution_10": {
                  "inputs": {
                    "name": "Solution",
                    "value": "Core"
                  },
                  "metadata": {
                    "operationMetadataId": "cda02161-e236-4687-9008-1609d7434ca9"
                  },
                  "runAfter": {},
                  "type": "SetVariable"
                },
                "Set_Subject_10": {
                  "inputs": {
                    "name": "Subject",
                    "value": "Your new Power Platform Environment is Live"
                  },
                  "metadata": {
                    "operationMetadataId": "327957c4-e025-4c28-9b9f-ad90ae74e5cd"
                  },
                  "runAfter": {
                    "Set_Body_10": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_TargetAudiance_10": {
                  "inputs": {
                    "name": "TargetAudiance",
                    "value": "Maker"
                  },
                  "metadata": {
                    "operationMetadataId": "9e8b6db6-eb34-4fc8-b871-b1a457c14b51"
                  },
                  "runAfter": {
                    "Set_Subject_10": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                }
              },
              "metadata": {
                "operationMetadataId": "255a57de-0a06-42ae-b330-f6dcab4e87ea"
              },
              "runAfter": {},
              "type": "Scope"
            }
          },
          "metadata": {
            "operationMetadataId": "feeff375-bd00-429f-b72a-43f82dfea122"
          },
          "runAfter": {
            "Env_Request_|_Notify_admin_when_new_request_submitted_--_Sned_email_a_new_req": [
              "Succeeded"
            ]
          },
          "type": "Scope"
        },
        "Env_Request_|_Notify_admin_when_new_request_submitted_--_Sned_email_a_new_req": {
          "actions": {
            "Insert_or_Update_Row_9": {
              "actions": {
                "Get_Mail_from_Table_9": {
                  "inputs": {
                    "authentication": "@parameters('$authentication')",
                    "host": {
                      "apiId": "/providers/Microsoft.PowerApps/apis/shared_commondataserviceforapps",
                      "connectionName": "shared_commondataserviceforapps",
                      "operationId": "GetItem"
                    },
                    "parameters": {
                      "$select": "admin_customizedemailid, admin_defaultbody, admin_defaultsubject, admin_body, admin_subject",
                      "entityName": "admin_customizedemails",
                      "recordId": "@variables('BasedOn')"
                    },
                    "retryPolicy": {
                      "count": 10,
                      "interval": "PT10S",
                      "type": "exponential"
                    }
                  },
                  "metadata": {
                    "operationMetadataId": "af884d4f-29a4-48a2-9fb0-cf42ca982738"
                  },
                  "runAfter": {
                    "Reset_RowExists_true_9": [
                      "Succeeded"
                    ]
                  },
                  "type": "OpenApiConnection"
                },
                "Insert_or_Update_9": {
                  "actions": {
                    "Update_a_row_9": {
                      "inputs": {
                        "authentication": "@parameters('$authentication')",
                        "host": {
                          "apiId": "/providers/Microsoft.PowerApps/apis/shared_commondataserviceforapps",
                          "connectionName": "shared_commondataserviceforapps",
                          "operationId": "UpdateRecord"
                        },
                        "parameters": {
                          "entityName": "admin_customizedemails",
                          "item/admin_actionname": "@variables('ActionName')",
                          "item/admin_basedon": "@variables('BasedOn')",
                          "item/admin_body": "@if(equals(outputs('Get_Mail_from_Table_9')?['body/admin_defaultbody'], true), variables('Body'), outputs('Get_Mail_from_Table_9')?['body/admin_body'])",
                          "item/admin_flowname": "@variables('FlowName')",
                          "item/admin_language": "en-US",
                          "item/admin_name": "@{variables('FlowName')} -- @{variables('ActionName')} -- en-US",
                          "item/admin_solution": "@variables('Solution')",
                          "item/admin_subject": "@if(equals(outputs('Get_Mail_from_Table_9')?['body/admin_defaultsubject'], true), variables('Subject'), outputs('Get_Mail_from_Table_9')?['body/admin_subject'])",
                          "item/admin_targetaudiance": "@variables('TargetAudiance')",
                          "recordId": "@variables('BasedOn')"
                        },
                        "retryPolicy": {
                          "count": 10,
                          "interval": "PT10S",
                          "type": "exponential"
                        }
                      },
                      "metadata": {
                        "operationMetadataId": "3a47b1b8-7663-4a58-825b-7829eeffb4af"
                      },
                      "runAfter": {},
                      "type": "OpenApiConnection"
                    }
                  },
                  "else": {
                    "actions": {
                      "Add_a_new_row_9": {
                        "inputs": {
                          "authentication": "@parameters('$authentication')",
                          "host": {
                            "apiId": "/providers/Microsoft.PowerApps/apis/shared_commondataserviceforapps",
                            "connectionName": "shared_commondataserviceforapps",
                            "operationId": "CreateRecord"
                          },
                          "parameters": {
                            "entityName": "admin_customizedemails",
                            "item/admin_actionname": "@variables('ActionName')",
                            "item/admin_basedon": "@variables('BasedOn')",
                            "item/admin_body": "@variables('Body')",
                            "item/admin_customizedemailid": "@variables('BasedOn')",
                            "item/admin_defaultbody": true,
                            "item/admin_defaultsubject": true,
                            "item/admin_flowname": "@variables('FlowName')",
                            "item/admin_language": "en-US",
                            "item/admin_name": "@{variables('FlowName')} -- @{variables('ActionName')} -- en-US",
                            "item/admin_solution": "@variables('Solution')",
                            "item/admin_subject": "@variables('Subject')",
                            "item/admin_targetaudiance": "@variables('TargetAudiance')"
                          },
                          "retryPolicy": {
                            "count": 10,
                            "interval": "PT10S",
                            "type": "exponential"
                          }
                        },
                        "metadata": {
                          "operationMetadataId": "08e5cc2a-ac50-4caa-9714-37f7d3aa4ba3"
                        },
                        "runAfter": {},
                        "type": "OpenApiConnection"
                      }
                    }
                  },
                  "expression": {
                    "equals": [
                      "@variables('RowExists')",
                      "@true"
                    ]
                  },
                  "metadata": {
                    "operationMetadataId": "b6911632-84fb-4e16-a94c-b818059b470f"
                  },
                  "runAfter": {
                    "Set_RowExists_false_9": [
                      "Succeeded",
                      "Skipped"
                    ]
                  },
                  "type": "If"
                },
                "Reset_RowExists_true_9": {
                  "inputs": {
                    "name": "RowExists",
                    "value": "@true"
                  },
                  "metadata": {
                    "operationMetadataId": "f27ae5cc-70d6-433f-94ff-b251b2ba4e81"
                  },
                  "runAfter": {},
                  "type": "SetVariable"
                },
                "Set_RowExists_false_9": {
                  "inputs": {
                    "name": "RowExists",
                    "value": "@false"
                  },
                  "metadata": {
                    "operationMetadataId": "bdcf2486-4f96-43f6-9b65-47c0f0d0b0f7"
                  },
                  "runAfter": {
                    "Get_Mail_from_Table_9": [
                      "Failed"
                    ]
                  },
                  "type": "SetVariable"
                }
              },
              "metadata": {
                "operationMetadataId": "7149d67c-1379-4a13-96a2-e959d0c7a3e2"
              },
              "runAfter": {
                "Setup_Values_9": [
                  "Succeeded"
                ]
              },
              "type": "Scope"
            },
            "Setup_Values_9": {
              "actions": {
                "Set_ActionName_9": {
                  "inputs": {
                    "name": "ActionName",
                    "value": "Send email a new request is ready for admin review"
                  },
                  "metadata": {
                    "operationMetadataId": "845f4f27-b43e-479d-ad4c-38fe81f32353"
                  },
                  "runAfter": {
                    "Set_FlowName_9": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_BasedOn_9": {
                  "inputs": {
                    "name": "BasedOn",
                    "value": "3e576736-0c43-ec11-8c62-00224829bf00"
                  },
                  "metadata": {
                    "operationMetadataId": "716674c4-828b-4762-acf0-16e15ea44f86"
                  },
                  "runAfter": {
                    "Set_TargetAudiance_9": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_Body_9": {
                  "inputs": {
                    "name": "Body",
                    "value": "<p><span style=\"font-size: 16px\"><strong>A new Environment Creation Request was submitted.<br>\n</strong></span><br>\nView request details and find the best DLP Policy configuration to accomodate the requested connectors with the Environment Request Admin App.<br>\n<br>\n<br>\n<span style=\"font-size: 16px\"><strong>Instructions<br>\n</strong></span><br>\n1. Go to the Environment Request Admin App<br>\n2. Find and select the request<br>\n3. Use the app to see how adding the new environment to DLP Policies will impact the requested connectors. Any modifications made in the app will be processed when the environment is created.<br>\n<br>\n<span style=\"font-size: 16px\"><b><u>Details</b></u></span><br>\n<br>"
                  },
                  "metadata": {
                    "operationMetadataId": "afcb151c-ca44-4ede-9cc3-ebb775f56487"
                  },
                  "runAfter": {
                    "Set_ActionName_9": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_FlowName_9": {
                  "inputs": {
                    "name": "FlowName",
                    "value": "Env Request | Notify admin when new request submitted"
                  },
                  "metadata": {
                    "operationMetadataId": "12c1ca20-6af1-429a-acb4-3d77386d1c45"
                  },
                  "runAfter": {
                    "Set_Solution_9": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_Solution_9": {
                  "inputs": {
                    "name": "Solution",
                    "value": "Core"
                  },
                  "metadata": {
                    "operationMetadataId": "11ec05a1-d367-48dc-870d-f1a4a2c51723"
                  },
                  "runAfter": {},
                  "type": "SetVariable"
                },
                "Set_Subject_9": {
                  "inputs": {
                    "name": "Subject",
                    "value": "New Power Platform Environment Creation Request"
                  },
                  "metadata": {
                    "operationMetadataId": "44b631d2-6b27-41ae-b139-033202c2d317"
                  },
                  "runAfter": {
                    "Set_Body_9": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_TargetAudiance_9": {
                  "inputs": {
                    "name": "TargetAudiance",
                    "value": "Admin"
                  },
                  "metadata": {
                    "operationMetadataId": "e8e03eca-eb54-4033-9945-65df94fa19b3"
                  },
                  "runAfter": {
                    "Set_Subject_9": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                }
              },
              "metadata": {
                "operationMetadataId": "00db900e-92f8-476d-9e46-e079804276c7"
              },
              "runAfter": {},
              "type": "Scope"
            }
          },
          "metadata": {
            "operationMetadataId": "832c2893-2fc6-412e-a7a2-8ea2f614d2d3"
          },
          "runAfter": {
            "Admin_|_Welcome_Email_v3_--_Send_Welcome_Mail": [
              "Succeeded"
            ]
          },
          "type": "Scope"
        },
        "Env_Request_|_Notify_requestor_when_rejected_--_Request_was_rejected": {
          "actions": {
            "Insert_or_Update_Row_3": {
              "actions": {
                "Get_Mail_from_Table_3": {
                  "inputs": {
                    "authentication": "@parameters('$authentication')",
                    "host": {
                      "apiId": "/providers/Microsoft.PowerApps/apis/shared_commondataserviceforapps",
                      "connectionName": "shared_commondataserviceforapps",
                      "operationId": "GetItem"
                    },
                    "parameters": {
                      "$select": "admin_customizedemailid, admin_defaultbody, admin_defaultsubject, admin_body, admin_subject",
                      "entityName": "admin_customizedemails",
                      "recordId": "@variables('BasedOn')"
                    },
                    "retryPolicy": {
                      "count": 10,
                      "interval": "PT10S",
                      "type": "exponential"
                    }
                  },
                  "metadata": {
                    "operationMetadataId": "bc729085-cbf7-435a-9bfe-3c7434b1a83a"
                  },
                  "runAfter": {
                    "Reset_RowExists_true_3": [
                      "Succeeded"
                    ]
                  },
                  "type": "OpenApiConnection"
                },
                "Insert_or_Update_3": {
                  "actions": {
                    "Update_a_row_3": {
                      "inputs": {
                        "authentication": "@parameters('$authentication')",
                        "host": {
                          "apiId": "/providers/Microsoft.PowerApps/apis/shared_commondataserviceforapps",
                          "connectionName": "shared_commondataserviceforapps",
                          "operationId": "UpdateRecord"
                        },
                        "parameters": {
                          "entityName": "admin_customizedemails",
                          "item/admin_actionname": "@variables('ActionName')",
                          "item/admin_basedon": "@variables('BasedOn')",
                          "item/admin_body": "@if(equals(outputs('Get_Mail_from_Table_3')?['body/admin_defaultbody'], true), variables('Body'), outputs('Get_Mail_from_Table_3')?['body/admin_body'])",
                          "item/admin_flowname": "@variables('FlowName')",
                          "item/admin_language": "en-US",
                          "item/admin_name": "@{variables('FlowName')} -- @{variables('ActionName')} -- en-US",
                          "item/admin_solution": "@variables('Solution')",
                          "item/admin_subject": "@if(equals(outputs('Get_Mail_from_Table_3')?['body/admin_defaultsubject'], true), variables('Subject'), outputs('Get_Mail_from_Table_3')?['body/admin_subject'])",
                          "item/admin_targetaudiance": "@variables('TargetAudiance')",
                          "recordId": "@variables('BasedOn')"
                        },
                        "retryPolicy": {
                          "count": 10,
                          "interval": "PT10S",
                          "type": "exponential"
                        }
                      },
                      "metadata": {
                        "operationMetadataId": "9afeb46a-9a6a-4690-aaf5-5b693b2cdb52"
                      },
                      "runAfter": {},
                      "type": "OpenApiConnection"
                    }
                  },
                  "else": {
                    "actions": {
                      "Add_a_new_row_3": {
                        "inputs": {
                          "authentication": "@parameters('$authentication')",
                          "host": {
                            "apiId": "/providers/Microsoft.PowerApps/apis/shared_commondataserviceforapps",
                            "connectionName": "shared_commondataserviceforapps",
                            "operationId": "CreateRecord"
                          },
                          "parameters": {
                            "entityName": "admin_customizedemails",
                            "item/admin_actionname": "@variables('ActionName')",
                            "item/admin_basedon": "@variables('BasedOn')",
                            "item/admin_body": "@variables('Body')",
                            "item/admin_customizedemailid": "@variables('BasedOn')",
                            "item/admin_defaultbody": true,
                            "item/admin_defaultsubject": true,
                            "item/admin_flowname": "@variables('FlowName')",
                            "item/admin_language": "en-US",
                            "item/admin_name": "@{variables('FlowName')} -- @{variables('ActionName')} -- en-US",
                            "item/admin_solution": "@variables('Solution')",
                            "item/admin_subject": "@variables('Subject')",
                            "item/admin_targetaudiance": "@variables('TargetAudiance')"
                          },
                          "retryPolicy": {
                            "count": 10,
                            "interval": "PT10S",
                            "type": "exponential"
                          }
                        },
                        "metadata": {
                          "operationMetadataId": "5cfc25f6-681f-496c-9702-3956ba2597fd"
                        },
                        "runAfter": {},
                        "type": "OpenApiConnection"
                      }
                    }
                  },
                  "expression": {
                    "equals": [
                      "@variables('RowExists')",
                      "@true"
                    ]
                  },
                  "metadata": {
                    "operationMetadataId": "e28385f9-4781-4722-ac38-15c38edb31c1"
                  },
                  "runAfter": {
                    "Set_RowExists_false_3": [
                      "Succeeded",
                      "Skipped"
                    ]
                  },
                  "type": "If"
                },
                "Reset_RowExists_true_3": {
                  "inputs": {
                    "name": "RowExists",
                    "value": "@true"
                  },
                  "metadata": {
                    "operationMetadataId": "82e00718-1744-4bb8-9cd9-a37537a9a946"
                  },
                  "runAfter": {},
                  "type": "SetVariable"
                },
                "Set_RowExists_false_3": {
                  "inputs": {
                    "name": "RowExists",
                    "value": "@false"
                  },
                  "metadata": {
                    "operationMetadataId": "db2ec315-1548-4c19-8739-1570b1aba98b"
                  },
                  "runAfter": {
                    "Get_Mail_from_Table_3": [
                      "Failed"
                    ]
                  },
                  "type": "SetVariable"
                }
              },
              "metadata": {
                "operationMetadataId": "e504b950-3186-4feb-ac88-3ef1f5685778"
              },
              "runAfter": {
                "Setup_Values_3": [
                  "Succeeded"
                ]
              },
              "type": "Scope"
            },
            "Setup_Values_3": {
              "actions": {
                "Set_ActionName_3": {
                  "inputs": {
                    "name": "ActionName",
                    "value": "Request was rejected"
                  },
                  "metadata": {
                    "operationMetadataId": "52c65d2e-3d1c-4fe7-b512-0971968f5d11"
                  },
                  "runAfter": {
                    "Set_FlowName_3": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_BasedOn_3": {
                  "inputs": {
                    "name": "BasedOn",
                    "value": "1cc436d4-ff42-ec11-8c62-00224829b4c1"
                  },
                  "metadata": {
                    "operationMetadataId": "3c72c7a5-6128-4db4-90a3-598e83314131"
                  },
                  "runAfter": {
                    "Set_TargetAudiance_3": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_Body_3": {
                  "inputs": {
                    "name": "Body",
                    "value": "<p>The request to create an environment was rejected. See below for more information about this decision.<br>\n<br>\nYou can view all your requests and make a new one in the Environment Request app.<br>\n<br>\n<br>"
                  },
                  "metadata": {
                    "operationMetadataId": "c6876588-4e34-4fc9-b9bd-32811406ea29"
                  },
                  "runAfter": {
                    "Set_ActionName_3": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_FlowName_3": {
                  "inputs": {
                    "name": "FlowName",
                    "value": "Env Request | Notify requestor when rejected"
                  },
                  "metadata": {
                    "operationMetadataId": "f05de72c-6427-4425-874d-501044f02aed"
                  },
                  "runAfter": {
                    "Set_Solution_3": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_Solution_3": {
                  "inputs": {
                    "name": "Solution",
                    "value": "Core"
                  },
                  "metadata": {
                    "operationMetadataId": "df306ad7-0601-48e5-9b25-f294c21d4dd7"
                  },
                  "runAfter": {},
                  "type": "SetVariable"
                },
                "Set_Subject_3": {
                  "inputs": {
                    "name": "Subject",
                    "value": "Your Environment Creation Request was rejected"
                  },
                  "metadata": {
                    "operationMetadataId": "c0e00053-bb41-49e5-a98e-30db546fc34c"
                  },
                  "runAfter": {
                    "Set_Body_3": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                },
                "Set_TargetAudiance_3": {
                  "inputs": {
                    "name": "TargetAudiance",
                    "value": "Maker"
                  },
                  "metadata": {
                    "operationMetadataId": "cca68c31-f93d-4857-b061-af1c27ba2cd7"
                  },
                  "runAfter": {
                    "Set_Subject_3": [
                      "Succeeded"
                    ]
                  },
                  "type": "SetVariable"
                }
              },
              "metadata": {
                "operationMetadataId": "f8b1f101-2e70-4bed-8818-57ce24d35523"
              },
              "runAfter": {},
              "type": "Scope"
            }
          },
          "metadata": {
            "operationMetadataId": "242300e1-20d1-4c69-a3cf-0dbc067db538"
          },
          "runAfter": {
            "Admin_|_Compliance_detail_request_v3_--_Send_Republish_Mail_to_Owner_Apps": [
              "Succeeded"
            ]
          },
          "type": "Scope"
        },
        "Initialize_ActionName": {
          "inputs": {
            "variables": [
              {
                "name": "ActionName",
                "type": "string"
              }
            ]
          },
          "metadata": {
            "operationMetadataId": "dd0f7ac9-3ea0-4c57-8744-cee2387775a4"
          },
          "runAfter": {
            "Initialize_FlowName": [
              "Succeeded"
            ]
          },
          "type": "InitializeVariable"
        },
        "Initialize_BasedOn": {
          "inputs": {
            "variables": [
              {
                "name": "BasedOn",
                "type": "string"
              }
            ]
          },
          "metadata": {
            "operationMetadataId": "0abebcde-8947-4590-b856-59746e90a9a4"
          },
          "runAfter": {
            "Initialize_TargetAudiance": [
              "Succeeded"
            ]
          },
          "type": "InitializeVariable"
        },
        "Initialize_Body": {
          "inputs": {
            "variables": [
              {
                "name": "Body",
                "type": "string"
              }
            ]
          },
          "metadata": {
            "operationMetadataId": "9367b8b3-6a5d-4583-b265-ee5e53a6d5fc"
          },
          "runAfter": {
            "Initialize_ActionName": [
              "Succeeded"
            ]
          },
          "type": "InitializeVariable"
        },
        "Initialize_FlowName": {
          "inputs": {
            "variables": [
              {
                "name": "FlowName",
                "type": "string"
              }
            ]
          },
          "metadata": {
            "operationMetadataId": "f4aff4fe-6397-4580-856f-2fc887c021b0"
          },
          "runAfter": {
            "Initialize_Solution": [
              "Succeeded"
            ]
          },
          "type": "InitializeVariable"
        },
        "Initialize_RowExists_true": {
          "inputs": {
            "variables": [
              {
                "name": "RowExists",
                "type": "boolean",
                "value": "@true"
              }
            ]
          },
          "metadata": {
            "operationMetadataId": "1d454dc4-1859-46e5-95b4-386904aa4e31"
          },
          "runAfter": {
            "Initialize_BasedOn": [
              "Succeeded"
            ]
          },
          "type": "InitializeVariable"
        },
        "Initialize_Solution": {
          "inputs": {
            "variables": [
              {
                "name": "Solution",
                "type": "string"
              }
            ]
          },
          "metadata": {
            "operationMetadataId": "98889713-1a3a-4bd3-9007-6d5732f1874b"
          },
          "runAfter": {},
          "type": "InitializeVariable"
        },
        "Initialize_Subject": {
          "inputs": {
            "variables": [
              {
                "name": "Subject",
                "type": "string"
              }
            ]
          },
          "metadata": {
            "operationMetadataId": "7c409d35-6af1-4e1f-b20f-97d4dd85688a"
          },
          "runAfter": {
            "Initialize_Body": [
              "Succeeded"
            ]
          },
          "type": "InitializeVariable"
        },
        "Initialize_TargetAudiance": {
          "inputs": {
            "variables": [
              {
                "name": "TargetAudiance",
                "type": "string"
              }
            ]
          },
          "metadata": {
            "operationMetadataId": "5de09400-cc76-4963-bdc0-4b611891c681"
          },
          "runAfter": {
            "Initialize_Subject": [
              "Succeeded"
            ]
          },
          "type": "InitializeVariable"
        }
      },
      "contentVersion": "1.0.0.0",
      "outputs": {},
      "parameters": {
        "$authentication": {
          "defaultValue": {},
          "type": "SecureObject"
        },
        "$connections": {
          "defaultValue": {},
          "type": "Object"
        }
      },
      "triggers": {
        "Schedule": {
          "metadata": {
            "operationMetadataId": "740261b1-1f3c-4bff-a333-565bbce9ba4c"
          },
          "recurrence": {
            "frequency": "Week",
            "interval": 1
          },
          "type": "Recurrence"
        }
      }
    }
  },
  "schemaVersion": "1.0.0.0"
}
