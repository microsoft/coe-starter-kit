<?xml version="1.0"?>
<widget id="http://microsoft.com/appmagic/timer" jsClass="AppMagic.Controls.Timer" name="timer" runtimeCost="1" spec="1.0" styleable="true" version="2.0.1" xmlns="http://openajax.org/metadata" xmlns:appMagic="http://schemas.microsoft.com/appMagic">
 <appMagic:capabilities autoBorderRadius="true" autoBorders="true" autoDisabledViewState="true" autoFill="true" autoFocusedBorders="true" autoPointerViewState="true" contextualViewsEnabled="true" isVersionFlexible="true" screenActiveAware="true"/>
 <appMagic:conversion from="2.0.0" to="2.0.1"/>
 <appMagic:displayMetadata>
  <appMagic:section>
   <appMagic:property name="AutoPause"/>
   <appMagic:property name="AutoStart"/>
   <appMagic:property name="DisplayMode"/>
   <appMagic:property name="Duration"/>
   <appMagic:property name="Repeat"/>
   <appMagic:property name="Text"/>
  </appMagic:section>
  <appMagic:section>
   <appMagic:property name="Visible"/>
   <appMagic:propertyGroup name="Padding">
    <appMagic:property labelOverride="##Padding_Bottom_Title##" name="PaddingBottom"/>
    <appMagic:property labelOverride="##Padding_Left_Title##" name="PaddingLeft"/>
    <appMagic:property labelOverride="##Padding_Right_Title##" name="PaddingRight"/>
    <appMagic:property labelOverride="##Padding_Top_Title##" name="PaddingTop"/>
   </appMagic:propertyGroup>
   <appMagic:propertyGroup name="Position">
    <appMagic:property name="X"/>
    <appMagic:property name="Y"/>
   </appMagic:propertyGroup>
   <appMagic:propertyGroup name="Size">
    <appMagic:property name="Height"/>
    <appMagic:property name="Width"/>
   </appMagic:propertyGroup>
  </appMagic:section>
  <appMagic:section>
   <appMagic:property displayType="EnumButtons" floatieDisplayType="FaceplateIconEnum" itemsOrder="Left;Center;Right;Justify" labelOverride="##FontAlign_Property##" name="Align" showInFloatie="true"/>
   <appMagic:property displayType="EnumIcon" itemsOrder="Bold;Semibold;Normal;Lighter" name="FontWeight"/>
   <appMagic:property displayType="FontEnum" name="Font" showInFloatie="true"/>
   <appMagic:property labelOverride="##FontSize_Property##" name="Size" showInFloatie="true"/>
   <appMagic:propertyGroup name="Border">
    <appMagic:property name="BorderColor"/>
    <appMagic:property name="BorderStyle"/>
    <appMagic:property name="BorderThickness"/>
   </appMagic:propertyGroup>
   <appMagic:propertyGroup name="Color">
    <appMagic:property name="Color" showInFloatie="true"/>
    <appMagic:property name="Fill" showInFloatie="true"/>
   </appMagic:propertyGroup>
   <appMagic:propertyGroup name="Radius">
    <appMagic:property name="RadiusBottomLeft"/>
    <appMagic:property name="RadiusBottomRight"/>
    <appMagic:property name="RadiusTopLeft"/>
    <appMagic:property name="RadiusTopRight"/>
   </appMagic:propertyGroup>
   <appMagic:propertyGroup name="Style">
    <appMagic:property displayType="ToggleButton" name="Italic"/>
    <appMagic:property displayType="ToggleButton" name="Strikethrough"/>
    <appMagic:property displayType="ToggleButton" name="Underline"/>
   </appMagic:propertyGroup>
  </appMagic:section>
  <appMagic:section>
   <appMagic:property name="TabIndex"/>
   <appMagic:property name="Tooltip"/>
   <appMagic:propertyGroup name="DisabledColor">
    <appMagic:property name="DisabledBorderColor"/>
    <appMagic:property name="DisabledColor"/>
    <appMagic:property name="DisabledFill"/>
   </appMagic:propertyGroup>
   <appMagic:propertyGroup name="HoverColor">
    <appMagic:property name="HoverBorderColor"/>
    <appMagic:property name="HoverColor"/>
    <appMagic:property name="HoverFill"/>
   </appMagic:propertyGroup>
   <appMagic:propertyGroup name="PressedColor">
    <appMagic:property name="PressedBorderColor"/>
    <appMagic:property name="PressedColor"/>
    <appMagic:property name="PressedFill"/>
   </appMagic:propertyGroup>
  </appMagic:section>
  <appMagic:section>
   <appMagic:property hideInPropertyPanel="true" name="Reset"/>
   <appMagic:property hideInPropertyPanel="true" name="Start"/>
  </appMagic:section>
 </appMagic:displayMetadata>
 <appMagic:includeProperties>
  <appMagic:includeProperty defaultValue="%Align.RESERVED%.Center" name="Align"/>
  <appMagic:includeProperty defaultValue="%FontWeight.RESERVED%.Normal" name="FontWeight"/>
  <appMagic:includeProperty defaultValue="%VerticalAlign.RESERVED%.Middle" name="VerticalAlign"/>
  <appMagic:includeProperty defaultValue="10" name="RadiusBottomLeft"/>
  <appMagic:includeProperty defaultValue="10" name="RadiusBottomRight"/>
  <appMagic:includeProperty defaultValue="10" name="RadiusTopLeft"/>
  <appMagic:includeProperty defaultValue="10" name="RadiusTopRight"/>
  <appMagic:includeProperty defaultValue="13" name="Size" phoneDefaultValue="23"/>
  <appMagic:includeProperty defaultValue="1366" name="maximumWidth"/>
  <appMagic:includeProperty defaultValue="160" name="Width" phoneDefaultValue="280" webDefaultValue="85"/>
  <appMagic:includeProperty defaultValue="2" name="BorderThickness"/>
  <appMagic:includeProperty defaultValue="4" name="FocusedBorderThickness"/>
  <appMagic:includeProperty defaultValue="40" name="Height" phoneDefaultValue="70" webDefaultValue="32"/>
  <appMagic:includeProperty defaultValue="5" name="minimumHeight"/>
  <appMagic:includeProperty defaultValue="5" name="minimumWidth"/>
  <appMagic:includeProperty defaultValue="5" name="PaddingBottom"/>
  <appMagic:includeProperty defaultValue="5" name="PaddingLeft"/>
  <appMagic:includeProperty defaultValue="5" name="PaddingRight"/>
  <appMagic:includeProperty defaultValue="5" name="PaddingTop"/>
  <appMagic:includeProperty defaultValue="768" name="maximumHeight"/>
  <appMagic:includeProperty defaultValue="ColorFade(Self.BorderColor, 20%)" name="HoverBorderColor"/>
  <appMagic:includeProperty defaultValue="ColorFade(Self.BorderColor, 70%)" name="DisabledBorderColor"/>
  <appMagic:includeProperty defaultValue="ColorFade(Self.Fill, -15%)" name="BorderColor"/>
  <appMagic:includeProperty defaultValue="ColorFade(Self.Fill, 20%)" name="HoverFill"/>
  <appMagic:includeProperty defaultValue="ColorFade(Self.Fill, 70%)" name="DisabledFill"/>
  <appMagic:includeProperty defaultValue="ColorFade(Self.Fill, 90%)" name="DisabledColor"/>
  <appMagic:includeProperty defaultValue="RGBA(255, 255, 255, 1)" name="Color"/>
  <appMagic:includeProperty defaultValue="RGBA(35, 31, 32, 1)" name="Fill"/>
  <appMagic:includeProperty defaultValue="Self.BorderColor" isExpr="true" name="FocusedBorderColor"/>
  <appMagic:includeProperty defaultValue="Self.Color" name="HoverColor"/>
  <appMagic:includeProperty defaultValue="Self.Color" name="PressedFill"/>
  <appMagic:includeProperty defaultValue="Self.Fill" name="PressedBorderColor"/>
  <appMagic:includeProperty defaultValue="Self.Fill" name="PressedColor"/>
  <appMagic:includeProperty defaultValue="Text(Time(0, 0, Self.Value/1000), &quot;hh:mm:ss&quot;)" isExpr="true" name="Text"/>
  <appMagic:includeProperty direction="in" name="OnSelect"/>
  <appMagic:includeProperty name="BorderStyle"/>
  <appMagic:includeProperty name="DisplayMode"/>
  <appMagic:includeProperty name="Font"/>
  <appMagic:includeProperty name="Italic"/>
  <appMagic:includeProperty name="Strikethrough"/>
  <appMagic:includeProperty name="TabIndex"/>
  <appMagic:includeProperty name="Tooltip"/>
  <appMagic:includeProperty name="Underline"/>
  <appMagic:includeProperty name="Visible"/>
  <appMagic:includeProperty name="X"/>
  <appMagic:includeProperty name="Y"/>
 </appMagic:includeProperties>
 <appMagic:insertMetadata>
  <appMagic:category name="Input" priority="130"/>
 </appMagic:insertMetadata>
 <appMagic:propertyDependencies>
  <appMagic:propertyDependency input="AutoStart" output="Value"/>
  <appMagic:propertyDependency input="Reset" output="Value"/>
  <appMagic:propertyDependency input="Start" output="Value"/>
 </appMagic:propertyDependencies>
 <author name="Microsoft AppMagic"/>
 <content><div class="appmagic-timer">
      <button
        class="timer-button"
        touch-action="pan-x pan-y"
        data-bind="{
          attr: {
            title: properties.Tooltip,
            'aria-label': accessibleLabel,
            'aria-describedby': descriptionId
          },
          disable: viewState.displayMode() != AppMagic.Constants.DisplayMode.Edit,
          event: {
            click: handleClick
          },
          css: {
            bottom: properties.VerticalAlign() === 'bottom',
            center: properties.Align() === 'center',
            disabled: viewState.displayMode() === AppMagic.Constants.DisplayMode.Disabled,
            justify: properties.Align() === 'justify',
            left: properties.Align() === 'left',
            middle: properties.VerticalAlign() === 'middle',
            readonly: viewState.displayMode() === AppMagic.Constants.DisplayMode.View,
            right: properties.Align() === 'right',
            strikethrough: properties.Strikethrough,
            top: properties.VerticalAlign() === 'top',
            underline: properties.Underline
          },
          style: {
            color: autoProperties.Color,
            fontFamily: properties.Font,
            fontSize: properties.Size,
            fontStyle: properties.Italic,
            fontWeight: properties.FontWeight,
            paddingBottom: properties.PaddingBottom,
            paddingLeft: properties.PaddingLeft,
            paddingRight: properties.PaddingRight,
            paddingTop: properties.PaddingTop,
            textAlign: properties.Align
          }
      }">
        <div
          class="timer-label"
          data-bind="{
            text: properties.Text
        }"></div>
      </button>
      <div
        data-bind="{
          text: AppMagic.Strings.TimerInstructions,
          visible: false,
          attr: {
            id: descriptionId,
          },
        }"
        ></div>
      <!-- Screen reader message updated periodically when timer runs. Interval defined in TimerViewModel.ts -->
      <div
        class="elapsed-time-message"
        data-bind="{
          attr: {
            'aria-label': AppMagic.Strings.TimerLastStatusLabel,
            'aria-live': properties.Visible() ? 'polite' : null
          },
          text: timerNotificationMessage
      }"></div>
    </div></content>
 <description>Timer Control description here.</description>
 <license type="text/html">&lt;p&gt;TODO:  Need license text here.&lt;/p&gt;</license>
 <properties>
  <property IsPrimaryOutputProperty="true" datatype="Number" direction="out" localizedName="##timer_Value##" name="Value">
   <appMagic:category>data</appMagic:category>
   <title>Value of the timer in milliseconds</title>
  </property>
  <property datatype="Boolean" defaultValue="false" direction="in" isPrimaryBehaviorProperty="true" localizedName="##timer_OnTimerEnd##" name="OnTimerEnd">
   <appMagic:category>behavior</appMagic:category>
   <appMagic:displayName>##timer_OnTimerEnd_DisplayName##</appMagic:displayName>
   <appMagic:tooltip>##timer_OnTimerEnd_Tooltip##</appMagic:tooltip>
   <title>Timer End</title>
  </property>
  <property datatype="Boolean" defaultValue="false" direction="in" localizedName="##timer_OnTimerStart##" name="OnTimerStart">
   <appMagic:category>behavior</appMagic:category>
   <appMagic:displayName>##timer_OnTimerStart_DisplayName##</appMagic:displayName>
   <appMagic:tooltip>##timer_OnTimerStart_Tooltip##</appMagic:tooltip>
   <title>Timer Start</title>
  </property>
  <property datatype="Boolean" defaultValue="false" localizedName="##timer_AutoStart##" name="AutoStart">
   <appMagic:category>data</appMagic:category>
   <appMagic:displayName>##timer_AutoStart_DisplayName##</appMagic:displayName>
   <appMagic:helperUI>boolean</appMagic:helperUI>
   <appMagic:tooltip>##timer_AutoStart_Tooltip##</appMagic:tooltip>
   <title>Automatically start timer when parent screen becomes active</title>
  </property>
  <property datatype="Boolean" defaultValue="false" localizedName="##timer_Repeat##" name="Repeat" nullDefault="false">
   <appMagic:category>data</appMagic:category>
   <appMagic:displayName>##timer_Repeat_DisplayName##</appMagic:displayName>
   <appMagic:helperUI>boolean</appMagic:helperUI>
   <appMagic:tooltip>##timer_Repeat_Tooltip##</appMagic:tooltip>
   <title>When End is reached, reset Value property to 0 and continues</title>
  </property>
  <property datatype="Boolean" defaultValue="true" localizedName="##timer_AutoPause##" name="AutoPause">
   <appMagic:category>data</appMagic:category>
   <appMagic:displayName>##timer_AutoPause_DisplayName##</appMagic:displayName>
   <appMagic:helperUI>boolean</appMagic:helperUI>
   <appMagic:tooltip>##timer_AutoPause_Tooltip##</appMagic:tooltip>
   <title>Automatically pause timer when parent screen becomes inactive</title>
  </property>
  <property datatype="boolean" defaultValue="false" localizedName="##timer_Reset##" name="Reset" nullDefault="false">
   <appMagic:category>data</appMagic:category>
   <appMagic:displayName>##timer_Reset_DisplayName##</appMagic:displayName>
   <appMagic:helperUI>boolean</appMagic:helperUI>
   <appMagic:tooltip>##timer_Reset_Tooltip##</appMagic:tooltip>
   <title>When transistioning from false to true, Resets timer</title>
  </property>
  <property datatype="boolean" defaultValue="false" localizedName="##timer_Start##" name="Start" nullDefault="false">
   <appMagic:category>data</appMagic:category>
   <appMagic:displayName>##timer_Start_DisplayName##</appMagic:displayName>
   <appMagic:helperUI>boolean</appMagic:helperUI>
   <appMagic:tooltip>##timer_Start_Tooltip##</appMagic:tooltip>
   <title>When true, timer will start playing or continue to play. When false, timer stops playing</title>
  </property>
  <property datatype="Number" defaultValue="60000" isPrimaryInputProperty="true" localizedName="##timer_Duration##" minimum="0" name="Duration" nullDefault="0">
   <appMagic:category>data</appMagic:category>
   <appMagic:displayName>##timer_Duration_DisplayName##</appMagic:displayName>
   <appMagic:tooltip>##timer_Duration_Tooltip##</appMagic:tooltip>
   <title>Duration value for the timer</title>
  </property>
 </properties>
 <requires>
  <require src="css/timer.css" type="css"/>
  <require src="js/timer.js" type="javascript"/>
 </requires>
</widget>
